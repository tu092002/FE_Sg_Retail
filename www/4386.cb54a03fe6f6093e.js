"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4386],{4386:(ot,D,h)=>{h.r(D),h.d(D,{BaocaodoanhthutheoThangPageModule:()=>at});var T=h(6895),m=h(4006),d=h(8779),A=h(9299),t=h(4650),c=h(3238),g=h(5439),Y=h.t(g,2),C=h.n(g);const u=g||Y,y=new t.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function E(){return{useUtc:!1}}});function b(o,n){const a=Array(o);for(let e=0;e<o;e++)a[e]=n(e);return a}let B=(()=>{class o extends c._A{constructor(a,e){super(),this._options=e,this.setLocale(a||u.locale())}setLocale(a){super.setLocale(a);let e=u.localeData(a);this._localeData={firstDayOfWeek:e.firstDayOfWeek(),longMonths:e.months(),shortMonths:e.monthsShort(),dates:b(31,r=>this.createDate(2017,0,r+1).format("D")),longDaysOfWeek:e.weekdays(),shortDaysOfWeek:e.weekdaysShort(),narrowDaysOfWeek:e.weekdaysMin()}}getYear(a){return this.clone(a).year()}getMonth(a){return this.clone(a).month()}getDate(a){return this.clone(a).date()}getDayOfWeek(a){return this.clone(a).day()}getMonthNames(a){return"long"==a?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(a){return"long"==a?this._localeData.longDaysOfWeek:"short"==a?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(a){return this.clone(a).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(a){return this.clone(a).daysInMonth()}clone(a){return a.clone().locale(this.locale)}createDate(a,e,r){const i=this._createMoment({year:a,month:e,date:r}).locale(this.locale);return i.isValid(),i}today(){return this._createMoment().locale(this.locale)}parse(a,e){return a&&"string"==typeof a?this._createMoment(a,e,this.locale):a?this._createMoment(a).locale(this.locale):null}format(a,e){return a=this.clone(a),this.isValid(a),a.format(e)}addCalendarYears(a,e){return this.clone(a).add({years:e})}addCalendarMonths(a,e){return this.clone(a).add({months:e})}addCalendarDays(a,e){return this.clone(a).add({days:e})}toIso8601(a){return this.clone(a).format()}deserialize(a){let e;if(a instanceof Date)e=this._createMoment(a).locale(this.locale);else if(this.isDateInstance(a))return this.clone(a);if("string"==typeof a){if(!a)return null;e=this._createMoment(a,u.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):super.deserialize(a)}isDateInstance(a){return u.isMoment(a)}isValid(a){return this.clone(a).isValid()}invalid(){return u.invalid()}_createMoment(a,e,r){const{strict:i,useUtc:s}=this._options||{};return s?u.utc(a,e,r,i):u(a,e,r,i)}}return o.\u0275fac=function(a){return new(a||o)(t.LFG(c.Ad,8),t.LFG(y,8))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var P=h(9490),f=h(4631),Z=h(2468),O=h(4377),p=h(9602),S=h(4144),M=h(9549),l=h(671),v=h(3848);const N=["myChart"];function U(o,n){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," No. "),t.qZA())}function w(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.hij(" ",a.no," ")}}function I(o,n){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Th\xe0nh ti\u1ec1n "),t.qZA())}function L(o,n){if(1&o&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.hij(" ",a.total," ")}}function R(o,n){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Gi\u1ea3m gi\xe1 "),t.qZA())}function x(o,n){if(1&o&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.hij(" ",a.discount," ")}}function F(o,n){1&o&&t._UZ(0,"mat-header-row")}function k(o,n){1&o&&t._UZ(0,"mat-row")}function Q(o,n){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," No. "),t.qZA())}function j(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.hij(" ",a.no," ")}}function J(o,n){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," T\u1ed5ng ti\u1ec1n thanh to\xe1n "),t.qZA())}function V(o,n){if(1&o&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.hij(" ",a.total," ")}}function W(o,n){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," T\u1ed5ng Gi\u1ea3m gi\xe1 "),t.qZA())}function G(o,n){if(1&o&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.hij(" ",a.discount," ")}}function $(o,n){1&o&&t._UZ(0,"mat-header-row")}function z(o,n){1&o&&t._UZ(0,"mat-row")}function H(o,n){1&o&&(t.TgZ(0,"div",25)(1,"div",26),t._UZ(2,"div",27),t.qZA()())}const _=C()||g,X={parse:{dateInput:"MM/YYYY"},display:{dateInput:"MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},q=[{path:"",component:(()=>{class o{constructor(a,e,r){this.dateAdapter=a,this._data=e,this.authService=r,this.date=new m.NI(_()),this.Loading=!0,this.const_data={},this.currentUser={},this.const_arr=[],this.const_category=[],this.label=[],this.data=[],this.API="/reports/chartmonth",this.API_CUSTOMER="/reports/chartdaycustomer",this.API_CIRCLE="/reports/chartmonthcircle",this.API_CATEGORY="/category",this.const_arr_cus=[],this.displayedColumns=["no","total","discount"],this.const_data_cus={}}ngOnInit(){this.currentUser=this.authService.getParseTokenUser(),this.loadcategory();var a,e,r=_();a=r.format("MM"),e=r.format("YYYY"),this.loaddata(a,e),this.loaddataCircle(a,e)}changeDate(a){var e,r,i=_(a._d);e=i.format("MM"),r=i.format("YYYY"),this.loaddata(e,r),this.loaddataCircle(e,r)}loaddata(a,e){this.const_data={},this.Loading=!1,this._data.post(f.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id,{month:a.toString(),year:e.toString()}).subscribe(r=>{this.const_data=r||[],this.mapCategoryAndData(r||[]),this.Loading=!0},r=>{this.Loading=!0})}loaddataCircle(a,e){this.Loading=!1,this._data.post(f.r.BASE_SERVER+this.currentUser.ip+this.API_CIRCLE+"/"+this.currentUser.tenant_id,{month:a.toString(),year:e.toString()}).subscribe(i=>{this.parseDataArrayString(i||[]),this.Loading=!0},i=>{this.Loading=!0})}loadcategory(){const a={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(f.r.BASE_SERVER+this.API_CATEGORY,a).subscribe(e=>{this.const_category=e||[],this.Loading=!0},e=>{this.Loading=!0})}setMonthAndYear(a,e){const r=this.date.value;r.month(a.month()),r.year(a.year()),this.date.setValue(r),e.close()}mapCategoryAndData(a){var e;this.const_arr=[];var r="";null===(e=this.const_data)||void 0===e||e.data.forEach((i,s)=>{0==s?(this.const_arr.push({group:i.group}),this.const_arr.push({no:s+1,itemcode:i.itemcode,total:i.total.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),discount:i.discount.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")})):(r==i.group||this.const_arr.push({group:i.group}),this.const_arr.push({no:s+1,itemcode:i.itemcode,total:i.total.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","),discount:i.discount.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")})),r=i.group}),this.dataSource=this.const_arr}parseDataArrayString(a){this.label=[],this.data=[],a?.data.forEach(e=>{this.data.push({no:"1",discount:e.discount,total:e.total})}),this.doughnutChartMethod()}isGroup(a,e){return e.group}doughnutChartMethod(){null!=this.doughnutChart&&this.doughnutChart.destroy(),this.doughnutChart=new P.kL(this.myChart.nativeElement,{type:"doughnut",data:{labels:this.label,datasets:[{label:"# of Vendor",data:this.data,backgroundColor:["rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(240,248,255,1)","rgba(0,255,255,1)","rgba(245,245,220,1)","rgba(0,0,255,1)","rgba(138,43,226,1)","rgba(165,42,42,1)","rgba(222, 184,135,1)","rgba(95,158,160,1)","rgba(127,255,0,1)","rgba(0,139,139,1)","rgba(255,140,0,1)","rgba(255,215,0,1)","rgba(0,128,0,1)"],hoverBackgroundColor:["#FFCE56","#FF6384","#36A2EB","#FFCE56","#FF6384","rgba(153, 102, 255, 0.2)","rgba(240,248,255,1)","rgba(0,255,255,1)","rgba(245,245,220,1)","rgba(0,0,255,1)","rgba(138,43,226,1)","rgba(165,42,42,1)","rgba(222, 184,135,1)","rgba(95,158,160,1)","rgba(127,255,0,1)","rgba(0,139,139,1)","rgba(255,140,0,1)","rgba(255,215,0,1)","rgba(0,128,0,1)"]}]}})}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(c._A),t.Y36(Z.D),t.Y36(O.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-baocaodoanhthutheo-thang"]],viewQuery:function(a,e){if(1&a&&t.Gf(N,5),2&a){let r;t.iGM(r=t.CRH())&&(e.myChart=r.first)}},features:[t._Bn([{provide:c._A,useClass:B,deps:[c.Ad,y]},{provide:c.sG,useValue:X}])],decls:51,vars:11,consts:[["slot","start"],[3,"fullscreen"],[1,"ion-padding"],["appearance","fill","id","vendor-option",1,"w-100"],["matInput","",3,"matDatepicker","formControl"],["matIconSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"monthSelected"],["dp",""],["label","B\u1ea3ng"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","no"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","total"],["style","justify-content: end;",4,"matCellDef"],["matColumnDef","discount"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["label","Bi\u1ec3u \u0111\u1ed3"],["id","bar-chart-container",2,"width","100%","height","100%"],[1,"vanvas1"],["myChart",""],["label","Doanh Thu "],["bgcolor","#000000",4,"ngIf"],[2,"justify-content","end"],["bgcolor","#000000"],["id","loader-wrapper"],["id","loader"]],template:function(a,e){if(1&a){const r=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"B\xe1o c\xe1o doanh thu theo th\xe1ng"),t.qZA()()(),t.TgZ(6,"ion-content",1)(7,"div",2)(8,"p")(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"Th\xe1ng v\xe0 N\u0103m"),t.qZA(),t._UZ(12,"input",4)(13,"mat-datepicker-toggle",5),t.TgZ(14,"mat-datepicker",6,7),t.NdJ("monthSelected",function(s){t.CHM(r);const et=t.MAs(15);return e.setMonthAndYear(s,et),t.KtG(e.changeDate(s))}),t.qZA()()(),t.TgZ(16,"mat-tab-group")(17,"mat-tab",8)(18,"div")(19,"mat-table",9),t.ynx(20,10),t.YNc(21,U,2,0,"mat-header-cell",11),t.YNc(22,w,2,1,"mat-cell",12),t.BQk(),t.ynx(23,13),t.YNc(24,I,2,0,"mat-header-cell",11),t.YNc(25,L,2,1,"mat-cell",14),t.BQk(),t.ynx(26,15),t.YNc(27,R,2,0,"mat-header-cell",11),t.YNc(28,x,2,1,"mat-cell",14),t.BQk(),t.YNc(29,F,1,0,"mat-header-row",16),t.YNc(30,k,1,0,"mat-row",17),t.qZA()()(),t.TgZ(31,"mat-tab",18)(32,"div",19),t._UZ(33,"canvas",20,21),t.qZA()()(),t.TgZ(35,"mat-tab-group")(36,"mat-tab",22)(37,"div")(38,"mat-table",9),t.ynx(39,10),t.YNc(40,Q,2,0,"mat-header-cell",11),t.YNc(41,j,2,1,"mat-cell",12),t.BQk(),t.ynx(42,13),t.YNc(43,J,2,0,"mat-header-cell",11),t.YNc(44,V,2,1,"mat-cell",14),t.BQk(),t.ynx(45,15),t.YNc(46,W,2,0,"mat-header-cell",11),t.YNc(47,G,2,1,"mat-cell",14),t.BQk(),t.YNc(48,$,1,0,"mat-header-row",16),t.YNc(49,z,1,0,"mat-row",17),t.qZA()()()()()(),t.YNc(50,H,3,0,"div",23)}if(2&a){const r=t.MAs(15);t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(6),t.Q6J("matDatepicker",r)("formControl",e.date),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Q6J("dataSource",e.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(8),t.Q6J("dataSource",e.data),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("ngIf",!e.Loading)}},dependencies:[T.O5,m.Fj,m.JJ,d.oU,d.Sm,d.W2,d.Gu,d.wd,d.sr,d.cs,p.Mq,p.hl,p.nW,S.Nt,M.KE,M.hX,M.R9,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,v.uX,v.SP,m.oH],styles:[".w-100[_ngcontent-%COMP%]{width:100%}  .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{background:white!important}table[_ngcontent-%COMP%]{width:100%}.example-month-picker[_ngcontent-%COMP%]   .mat-calendar-period-button[_ngcontent-%COMP%]{pointer-events:none}.example-month-picker[_ngcontent-%COMP%]   .mat-calendar-arrow[_ngcontent-%COMP%]{display:none}  .vanvas1{width:100%!important;height:100%!important}"]}),o})()}];let K=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[A.Bz.forChild(q),A.Bz]}),o})();var tt=h(5064);let at=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[T.ez,m.u5,d.Pc,tt.q,m.UX,c.XK,K]}),o})()}}]);