"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7388],{9620:(A,f,r)=>{r.d(f,{I:()=>t});var m=r(655),n=r(7598),p=r(4650),t=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}return(0,m.ZT)(e,c),e.prototype.scan=function(o,u){return(0,n.DM)(this,"scan",{observable:!0},arguments)},e.prototype.startScan=function(o){return(0,n.DM)(this,"startScan",{observable:!0,clearFunction:"stopScan",clearWithArgs:!1},arguments)},e.prototype.startScanWithOptions=function(o,u){return(0,n.DM)(this,"startScanWithOptions",{observable:!0,clearFunction:"stopScan",clearWithArgs:!1},arguments)},e.prototype.stopScan=function(){return(0,n.DM)(this,"stopScan",{},arguments)},e.prototype.setPin=function(o){return(0,n.DM)(this,"setPin",{observable:!0},arguments)},e.prototype.connect=function(o){return(0,n.DM)(this,"connect",{observable:!0,clearFunction:"disconnect",clearWithArgs:!0},arguments)},e.prototype.autoConnect=function(o,u,s){return(0,n.DM)(this,"autoConnect",{sync:!0},arguments)},e.prototype.requestMtu=function(o,u){return(0,n.DM)(this,"requestMtu",{},arguments)},e.prototype.refreshDeviceCache=function(o,u){return(0,n.DM)(this,"refreshDeviceCache",{},arguments)},e.prototype.disconnect=function(o){return(0,n.DM)(this,"disconnect",{},arguments)},e.prototype.read=function(o,u,s){return(0,n.DM)(this,"read",{},arguments)},e.prototype.write=function(o,u,s,_){return(0,n.DM)(this,"write",{},arguments)},e.prototype.writeWithoutResponse=function(o,u,s,_){return(0,n.DM)(this,"writeWithoutResponse",{},arguments)},e.prototype.startNotification=function(o,u,s){return(0,n.DM)(this,"startNotification",{observable:!0,destruct:!0,clearFunction:"stopNotification",clearWithArgs:!0},arguments)},e.prototype.stopNotification=function(o,u,s){return(0,n.DM)(this,"stopNotification",{},arguments)},e.prototype.isConnected=function(o){return(0,n.DM)(this,"isConnected",{},arguments)},e.prototype.isEnabled=function(){return(0,n.DM)(this,"isEnabled",{},arguments)},e.prototype.startStateNotifications=function(){return(0,n.DM)(this,"startStateNotifications",{observable:!0,clearFunction:"stopStateNotifications",clearWithArgs:!1},arguments)},e.prototype.stopStateNotifications=function(){return(0,n.DM)(this,"stopStateNotifications",{},arguments)},e.prototype.startLocationStateNotifications=function(){return(0,n.DM)(this,"startLocationStateNotifications",{observable:!0,clearFunction:"stopLocationStateNotifications",clearWithArgs:!1},arguments)},e.prototype.stopLocationStateNotifications=function(){return(0,n.DM)(this,"stopLocationStateNotifications",{},arguments)},e.prototype.showBluetoothSettings=function(){return(0,n.DM)(this,"showBluetoothSettings",{},arguments)},e.prototype.enable=function(){return(0,n.DM)(this,"enable",{},arguments)},e.prototype.readRSSI=function(o){return(0,n.DM)(this,"readRSSI",{},arguments)},e.prototype.connectedPeripheralsWithServices=function(o){return(0,n.DM)(this,"connectedPeripheralsWithServices",{},arguments)},e.prototype.peripheralsWithIdentifiers=function(o){return(0,n.DM)(this,"peripheralsWithIdentifiers",{},arguments)},e.prototype.bondedDevices=function(){return(0,n.DM)(this,"bondedDevices",{},arguments)},e.prototype.isLocationEnabled=function(){return(0,n.DM)(this,"isLocationEnabled",{},arguments)},e.\u0275fac=function(){let o;return function(s){return(o||(o=p.n5z(e)))(s||e)}}(),e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac}),e.pluginName="BLE",e.plugin="cordova-plugin-ble-central",e.pluginRef="ble",e.repo="https://github.com/don/cordova-plugin-ble-central",e.platforms=["Android","iOS"],e=(0,m.gn)([],e)}(n.On)},2810:(A,f,r)=>{r.d(f,{j:()=>e});var m=r(655),n=r(4650),p=r(9620),t=r(849),c=r(8779);let e=(()=>{class o{constructor(s,_,M,I){this.ble=s,this.ngZore=_,this.storage=M,this.alertController=I,this.devices=[],this.idDevice="",this.success=v=>{this.idDevice=v,this.deviceConnected(v)},this.fail=v=>{alert(v)}}Scan(){this.devices=[],this.storage.set("idDevice","20"),this.ble.scan([],15).subscribe(s=>this.onDevicesDiscovered(s))}onDevicesDiscovered(s){this.ngZore.run(()=>{this.devices.push(s)})}connectPrint(s){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Connect",message:"Do you want to connect with?",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Connect",handler:()=>{this.ble.connect(s.id).subscribe(()=>{this.success(s.id)})}}]})).present()})}deviceConnected(s){this.ble.isConnected(s).then(_=>{this.idDevice=s,this.storage.set("idDevice",s),alert("Connected Successfullly")},_=>{alert("error"+JSON.stringify(_))})}disconnect(s){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Disconnect?",message:"Do you want to Disconnect?",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Disconnect",handler:()=>{this.ble.disconnect(s)}}]})).present()})}getIdDevice(){return this.idDevice}}return o.\u0275fac=function(s){return new(s||o)(n.LFG(p.I),n.LFG(n.R0b),n.LFG(t.K),n.LFG(c.Br))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},7388:(A,f,r)=>{r.d(f,{o:()=>B});var m=r(655),n=r(4006),p=r(4631),t=r(4650),c=r(8779),e=r(2468),o=r(4377),u=r(9620),s=r(162),_=r(2810),M=r(6895),I=r(4859),v=r(4144),S=r(9549),P=r(3848);function O(h,D){if(1&h){const i=t.EpF();t.TgZ(0,"ion-card-content",29),t.NdJ("click",function(){const d=t.CHM(i).$implicit,g=t.oxw();return t.KtG(g.connectPrint(d))}),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()}if(2&h){const i=D.$implicit;t.xp6(2),t.Oqu(i.name||"Kh\xf4ng x\xe1c \u0111\u1ecbnh"),t.xp6(2),t.Oqu(i.id),t.xp6(2),t.hij("RSSI: ",i.rssi,"")}}function y(h,D){1&h&&(t.TgZ(0,"div",30)(1,"div",31),t._UZ(2,"div",32),t.qZA()())}let B=(()=>{class h{constructor(i,a,l,d,g,U,C,E,b){this.modalCtrl=i,this._data=a,this.authService=l,this.formBuilder=d,this.ble=g,this.ngZore=U,this.alertController=C,this._uploadService=E,this.bluetoothBillService=b,this.Loading=!0,this.API="/configsetting",this.BASE_SERVERS=p.r.BASE_SERVER+"/",this.fileToUpload=null,this.const_data={},this.const_all={},this.currentUser={},this.devices=[]}ngOnInit(){this.currentUser=this.authService.getParseTokenUser(),this.loaddata()}loaddata(){this.Loading=!1,this.createForm();{const a={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(p.r.BASE_SERVER+this.API,a).subscribe(l=>{var d;this.const_all=l||[],this.setValue(null===(d=this.const_all)||void 0===d?void 0:d.data),this.Loading=!0},l=>{this.Loading=!0})}}createForm(){this.formGroup=this.formBuilder.group({company:[null],address:[null,n.kI.required],phone:[null],masothue:[null],ip_connection:[null],database:[null],image:[null]})}setValue(i){i.length>0&&(this.formGroup.controls.company.setValue(i[0].company),this.formGroup.controls.address.setValue(i[0].address),this.formGroup.controls.phone.setValue(i[0].phone),this.formGroup.controls.masothue.setValue(i[0].mst),this.formGroup.controls.ip_connection.setValue(p.r.BASE_SERVER+this.currentUser.ip),this.formGroup.controls.database.setValue(this.currentUser.nameDB),this.formGroup.controls.ip_connection.disable(),this.formGroup.controls.database.disable(),null==i[0].image||null==i[0].image||""==i[0].image?this.preview_upload1="../../../../../../assets/images/imgdefault.jpeg":(this.preview_upload1=this.BASE_SERVERS+i[0].image,this.anh=i[0].image),this.formGroup.controls.image.setValue(this.preview_upload1))}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(i){var a,l,d,g,U,C,E={};if((null===(a=this.const_all)||void 0===a?void 0:a.data.length)<=0)E={company:i.company,address:i.address,phone:i.phone,mst:i.masothue,ip:i.ip_connection,database:i.database,username:null===(l=this.currentUser)||void 0===l?void 0:l.username,password:null===(d=this.currentUser)||void 0===d?void 0:d.username,image:null==this.nameFileUpload||null==this.nameFileUpload||""==this.nameFileUpload?"":this.nameFileUpload.image_save_url},this._data.post(p.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id,E).subscribe(b=>{this._data.showUpdateSuccess("")});else{const b=null===(g=this.const_all)||void 0===g?void 0:g.data[0].ID;E={company:i.company,address:i.address,phone:i.phone,mst:i.masothue,ip:i.ip_connection,database:i.database,username:null===(U=this.currentUser)||void 0===U?void 0:U.username,password:null===(C=this.currentUser)||void 0===C?void 0:C.username,image:null==this.nameFileUpload||null==this.nameFileUpload||""==this.nameFileUpload?"":this.nameFileUpload.image_save_url},this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id+`/${b}`,E).subscribe(T=>{this._data.showUpdateSuccess("")})}return this.modalCtrl.dismiss("this.name","confirm")}Scan(){this.devices=[],this.bluetoothBillService.Scan(),this.devices=this.bluetoothBillService.devices}connectPrint(i){return(0,m.mG)(this,void 0,void 0,function*(){this.bluetoothBillService.connectPrint(i)})}selectFile(i){const a=i.target.files[0];this.uploadImage_1=i.target.files;const l=new FileReader;l.onload=d=>this.preview_upload1=l.result,l.readAsDataURL(a),this.handleFileInput()}handleFileInput(){this.fileToUpload=null,this.fileToUpload=this.uploadImage_1.item(0),this.fileToUpload&&this._uploadService.postFile(this.fileToUpload).subscribe(a=>{this.nameFileUpload=a},a=>{})}}return h.\u0275fac=function(i){return new(i||h)(t.Y36(c.IN),t.Y36(e.D),t.Y36(o.e),t.Y36(n.qu),t.Y36(u.I),t.Y36(t.R0b),t.Y36(c.Br),t.Y36(s.J),t.Y36(_.j))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-config-app"]],decls:56,vars:4,consts:[["slot","start"],["color","medium",3,"click"],[2,"text-align","center"],["slot","end"],[3,"click"],[1,"ion-padding"],["label","C\xe0i \u0111\u1eb7t"],[3,"formGroup"],["appearance","fill","id","vendor-option",1,"w-100"],["matInput","","formControlName","company"],["matInput","","formControlName","address"],["matInput","","formControlName","phone"],["matInput","","formControlName","masothue"],["matInput","","formControlName","ip_connection"],["matInput","","formControlName","database"],["role","main",1,"content"],[1,"form-group","input_container"],["placeholder",".","type","file","id","file",3,"change"],["img1",""],[1,"btn_upload"],["mat-raised-button","",3,"click"],["alt","",1,"preview",3,"src"],["label","T\xecm ki\u1ebfm m\xe1y in"],[2,"width","100%"],[2,"width","100%","text-align","right"],["slot","end",2,"width","25%",3,"click"],["name","Bluetooth"],["ion-item","",3,"click",4,"ngFor","ngForOf"],["bgcolor","#000000",4,"ngIf"],["ion-item","",3,"click"],["bgcolor","#000000"],["id","loader-wrapper"],["id","loader"]],template:function(i,a){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return a.cancel()}),t._uU(4,"Cancel"),t.qZA()(),t.TgZ(5,"ion-title",2),t._uU(6,"C\xe0i \u0111\u1eb7t"),t.qZA(),t.TgZ(7,"ion-buttons",3)(8,"ion-button",4),t.NdJ("click",function(){return a.confirm(a.formGroup.value)}),t._uU(9,"X\xe1c nh\u1eadn"),t.qZA()()()(),t.TgZ(10,"ion-content",5)(11,"div")(12,"mat-tab-group")(13,"mat-tab",6)(14,"form",7)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"T\xean c\xf4ng ty"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",8)(20,"mat-label"),t._uU(21,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t._UZ(22,"input",10),t.qZA(),t.TgZ(23,"mat-form-field",8)(24,"mat-label"),t._uU(25,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.TgZ(27,"mat-form-field",8)(28,"mat-label"),t._uU(29,"M\xe3 s\u1ed1 thu\u1ebf"),t.qZA(),t._UZ(30,"input",12),t.qZA(),t.TgZ(31,"mat-form-field",8)(32,"mat-label"),t._uU(33,"IP"),t.qZA(),t._UZ(34,"input",13),t.qZA(),t.TgZ(35,"mat-form-field",8)(36,"mat-label"),t._uU(37,"Database"),t.qZA(),t._UZ(38,"input",14),t.qZA(),t.TgZ(39,"div",15)(40,"div",16)(41,"input",17,18),t.NdJ("change",function(d){return a.selectFile(d)}),t.qZA()(),t.TgZ(43,"div",19)(44,"button",20),t.NdJ("click",function(){return a.handleFileInput()}),t._uU(45,"Upload Image "),t.qZA()(),t.TgZ(46,"div"),t._UZ(47,"img",21),t.qZA()()()(),t.TgZ(48,"mat-tab",22)(49,"div",23)(50,"div",24)(51,"ion-button",25),t.NdJ("click",function(){return a.Scan()}),t._UZ(52,"ion-icon",26),t.qZA()(),t.TgZ(53,"ion-list"),t.YNc(54,O,7,3,"ion-card-content",27),t.qZA()()()()()(),t.YNc(55,y,3,0,"div",28)),2&i&&(t.xp6(14),t.Q6J("formGroup",a.formGroup),t.xp6(33),t.s9C("src",a.preview_upload1,t.LSH),t.xp6(7),t.Q6J("ngForOf",a.devices),t.xp6(1),t.Q6J("ngIf",!a.Loading))},dependencies:[c.YG,c.Sm,c.FN,c.W2,c.Gu,c.gu,c.q_,c.wd,c.sr,M.sg,M.O5,n._Y,n.Fj,n.JJ,n.JL,I.lW,v.Nt,S.KE,S.hX,P.uX,P.SP,n.sg,n.u],styles:[".w-100[_ngcontent-%COMP%]{width:100%}  .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{background:white!important}  .mdc-text-field--filled:not(.mdc-text-field--disabled){background:white!important}table[_ngcontent-%COMP%]{width:100%}.example-viewport[_ngcontent-%COMP%]{height:100%;width:100%}.display_none[_ngcontent-%COMP%]{display:none}"]}),h})()},162:(A,f,r)=>{r.d(f,{J:()=>t});var m=r(4631),n=r(4650),p=r(529);let t=(()=>{class c{constructor(o){this.httpClient=o}createrheader(){return{"Content-Type":"multipart/form-data",Accept:"application/json"}}postFile(o){const u=new FormData;return u.append("image",o,o.name),this.httpClient.post(m.r.BASE_SERVER+"/upload",u)}}return c.\u0275fac=function(o){return new(o||c)(n.LFG(p.eN))},c.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);