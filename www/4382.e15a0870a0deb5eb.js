"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4382],{4382:(q,p,u)=>{u.r(p),u.d(p,{BaocaotonghopXuatkhoPageModule:()=>J});var f=u(6895),y=u(4006),h=u(8779),v=u(9299),d=u(5439),B=u(8053),b=u(4631),t=u(4650),Z=u(3238),k=u(2468),A=u(4377),l=u(9602),D=u(4144),g=u(9549),c=u(671),C=u(3848);const P=["myChart"];function T(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," No. "),t.qZA())}function _(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.no," ")}}function Y(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," M\xe3 "),t.qZA())}function E(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.itemcode," ")}}function X(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," S\u1ed1 l\u01b0\u1ee3ng "),t.qZA())}function M(a,n){if(1&a&&(t.TgZ(0,"mat-cell",23),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function U(a,n){if(1&a&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij("Kho ",e.group,"")}}function w(a,n){1&a&&t._UZ(0,"mat-header-row")}function F(a,n){1&a&&t._UZ(0,"mat-row")}function S(a,n){1&a&&t._UZ(0,"mat-row")}function R(a,n){1&a&&(t.TgZ(0,"div",25)(1,"div",26),t._UZ(2,"div",27),t.qZA()())}const x=function(){return["groupHeader"]},I=[{path:"",component:(()=>{class a{constructor(e,o,i){this.dateAdapter=e,this._data=o,this.authService=i,this.dateFrom=d(),this.dateTo=d(),this.Loading=!0,this.const_data={},this.currentUser={},this.const_arr=[],this.const_category=[],this.label=[],this.data=[],this.API="/reports/chartissue",this.API_CATEGORY="/category",this.displayedColumns=["no","itemcode","quantity"],this.dateAdapter.setLocale("en-GB")}ngOnInit(){this.currentUser=this.authService.getParseTokenUser()}changeDate(e,o,i){if("fromdate"==i){if(null==o.datepickerInput.value&&null==o.datepickerInput.value&&""==o.datepickerInput.value)return;var r="",s="";if(this.dateFrom=d(e.value),r=this.dateFrom.format("YYYY-MM-DD"),this.dateFrom=d(o.datepickerInput.value),"Invalid date"==(s=this.dateFrom.format("YYYY-MM-DD")))return;this.loaddata(r,s)}else if("todate"==i){if(null==o.datepickerInput.value&&null==o.datepickerInput.value&&""==o.datepickerInput.value)return;if(r="",s="",this.dateFrom=d(e.value),s=this.dateFrom.format("YYYY-MM-DD"),this.dateFrom=d(o.datepickerInput.value),"Invalid date"==(r=this.dateFrom.format("YYYY-MM-DD")))return;this.loaddata(r,s)}}loaddata(e,o){this.const_data={},this.Loading=!1,this._data.post(b.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id,{fromdate:e.toString(),todate:o.toString()}).subscribe(i=>{this.const_data=i||[],this.mapCategoryAndData(i||[]),this.Loading=!0},i=>{this.Loading=!0})}loadcategory(){const e={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(b.r.BASE_SERVER+this.API_CATEGORY,e).subscribe(o=>{this.const_category=o||[],this.Loading=!0},o=>{this.Loading=!0})}mapCategoryAndData(e){var o;this.const_arr=[];var i="";null===(o=this.const_data)||void 0===o||o.data.forEach((r,s)=>{0==s?(this.const_arr.push({group:r.whscode}),this.const_arr.push({no:s+1,itemcode:r.itemcode,quantity:r.quantity.toString()})):(i==r.whscode||this.const_arr.push({group:r.whscode}),this.const_arr.push({no:s+1,itemcode:r.itemcode,quantity:r.quantity.toString()})),i=r.whscode}),this.dataSource=this.const_arr}parseDataArrayString(e){this.label=[],this.data=[],e.forEach(o=>{this.label.push(o.itemcode),this.data.push(o.quantity)}),this.doughnutChartMethod()}isGroup(e,o){return o.group}doughnutChartMethod(){null!=this.doughnutChart&&this.doughnutChart.destroy(),this.doughnutChart=new B.ZP(this.myChart.nativeElement,{type:"doughnut",data:{labels:this.label,datasets:[{label:"# of Vendor",data:this.data,backgroundColor:["rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(240,248,255,1)","rgba(0,255,255,1)","rgba(245,245,220,1)","rgba(0,0,255,1)","rgba(138,43,226,1)","rgba(165,42,42,1)","rgba(222, 184,135,1)","rgba(95,158,160,1)","rgba(127,255,0,1)","rgba(0,139,139,1)","rgba(255,140,0,1)","rgba(255,215,0,1)","rgba(0,128,0,1)"],hoverBackgroundColor:["#FFCE56","#FF6384","#36A2EB","#FFCE56","#FF6384","rgba(153, 102, 255, 0.2)","rgba(240,248,255,1)","rgba(0,255,255,1)","rgba(245,245,220,1)","rgba(0,0,255,1)","rgba(138,43,226,1)","rgba(165,42,42,1)","rgba(222, 184,135,1)","rgba(95,158,160,1)","rgba(127,255,0,1)","rgba(0,139,139,1)","rgba(255,140,0,1)","rgba(255,215,0,1)","rgba(0,128,0,1)"]}]}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z._A),t.Y36(k.D),t.Y36(A.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-baocaotonghop-xuatkho"]],viewQuery:function(e,o){if(1&e&&t.Gf(P,5),2&e){let i;t.iGM(i=t.CRH())&&(o.myChart=i.first)}},decls:42,vars:12,consts:[["slot","start"],[3,"fullscreen"],[1,"ion-padding"],["appearance","fill","id","vendor-option",1,"w-100"],["matInput","","disabled","",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["disabled","false"],["dp3",""],["dp4",""],["label","B\u1ea3ng"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","no"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","itemcode"],["matColumnDef","quantity"],["style","justify-content: end;",4,"matCellDef"],["matColumnDef","groupHeader"],["style","font-weight: bold;",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[4,"matRowDef","matRowDefColumns","matRowDefWhen"],["bgcolor","#000000",4,"ngIf"],[2,"justify-content","end"],[2,"font-weight","bold"],["bgcolor","#000000"],["id","loader-wrapper"],["id","loader"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"T\u1ed5ng h\u1ee3p xu\u1ea5t kho"),t.qZA()()(),t.TgZ(6,"ion-content",1)(7,"div",2)(8,"p")(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"T\u1eeb ng\xe0y"),t.qZA(),t.TgZ(12,"input",4),t.NdJ("dateChange",function(s){t.CHM(i);const m=t.MAs(22);return t.KtG(o.changeDate(s,m,"fromdate"))}),t.qZA(),t._UZ(13,"mat-datepicker-toggle",5)(14,"mat-datepicker",6,7),t.qZA(),t.TgZ(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"\u0110\u1ebfn ng\xe0y"),t.qZA(),t.TgZ(19,"input",4),t.NdJ("dateChange",function(s){t.CHM(i);const m=t.MAs(15);return t.KtG(o.changeDate(s,m,"todate"))}),t.qZA(),t._UZ(20,"mat-datepicker-toggle",5)(21,"mat-datepicker",6,8),t.qZA()(),t.TgZ(23,"mat-tab-group")(24,"mat-tab",9)(25,"div")(26,"mat-table",10),t.ynx(27,11),t.YNc(28,T,2,0,"mat-header-cell",12),t.YNc(29,_,2,1,"mat-cell",13),t.BQk(),t.ynx(30,14),t.YNc(31,Y,2,0,"mat-header-cell",12),t.YNc(32,E,2,1,"mat-cell",13),t.BQk(),t.ynx(33,15),t.YNc(34,X,2,0,"mat-header-cell",12),t.YNc(35,M,2,1,"mat-cell",16),t.BQk(),t.ynx(36,17),t.YNc(37,U,2,1,"mat-cell",18),t.BQk(),t.YNc(38,w,1,0,"mat-header-row",19),t.YNc(39,F,1,0,"mat-row",20),t.YNc(40,S,1,0,"mat-row",21),t.qZA()()()()()(),t.YNc(41,R,3,0,"div",22)}if(2&e){const i=t.MAs(15),r=t.MAs(22);t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(6),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(6),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Q6J("dataSource",o.dataSource),t.xp6(12),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(11,x))("matRowDefWhen",o.isGroup),t.xp6(1),t.Q6J("ngIf",!o.Loading)}},dependencies:[f.O5,h.oU,h.Sm,h.W2,h.Gu,h.wd,h.sr,h.cs,l.Mq,l.hl,l.nW,D.Nt,g.KE,g.hX,g.R9,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,C.uX,C.SP],styles:[".w-100[_ngcontent-%COMP%]{width:100%}  .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{background:white!important}table[_ngcontent-%COMP%]{width:100%}"]}),a})()}];let Q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[v.Bz.forChild(I),v.Bz]}),a})();var N=u(5064);let J=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[f.ez,y.u5,h.Pc,N.q,Q]}),a})()}}]);