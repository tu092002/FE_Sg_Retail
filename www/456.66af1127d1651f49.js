"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[456],{456:($,_,s)=>{s.r(_),s.d(_,{BaocaodoanhthutheoNgayPageModule:()=>O});var g=s(6895),b=s(4006),u=s(8779),y=s(9299),d=s(5439),A=s(8053),l=s(4631),t=s(4650),C=s(3238),Z=s(2468),B=s(4377),m=s(9602),E=s(4144),p=s(9549),c=s(671),v=s(3848);const N=["myChart"];function T(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," No. "),t.qZA())}function P(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.no," ")}}function D(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Th\xe0nh ti\u1ec1n "),t.qZA())}function S(a,n){if(1&a&&(t.TgZ(0,"mat-cell",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",t.gM2(2,1,e.total,"\u0111 ","symbol","1.0")," ")}}function U(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Gi\u1ea3m gi\xe1 "),t.qZA())}function Y(a,n){if(1&a&&(t.TgZ(0,"mat-cell",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",t.gM2(2,1,e.discount,"\u0111 ","symbol","1.0")," ")}}function M(a,n){1&a&&t._UZ(0,"mat-header-row")}function R(a,n){1&a&&t._UZ(0,"mat-row")}function x(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," S\u1ed1 kh\xe1ch "),t.qZA())}function I(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.Sl," ")}}function F(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," T\u1ed5ng ti\u1ec1n thanh to\xe1n "),t.qZA())}function L(a,n){if(1&a&&(t.TgZ(0,"mat-cell",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",t.gM2(2,1,e.total,"\u0111 ","symbol","1.0")," ")}}function Q(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," T\u1ed5ng Gi\u1ea3m gi\xe1 "),t.qZA())}function w(a,n){if(1&a&&(t.TgZ(0,"mat-cell",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",t.gM2(2,1,e.discount,"\u0111 ","symbol","1.0")," ")}}function J(a,n){1&a&&t._UZ(0,"mat-header-row")}function k(a,n){1&a&&t._UZ(0,"mat-row")}function G(a,n){1&a&&(t.TgZ(0,"div",26)(1,"div",27),t._UZ(2,"div",28),t.qZA()())}const j=[{path:"",component:(()=>{class a{constructor(e,o,i){this.dateAdapter=e,this._data=o,this.authService=i,this.dateFrom=d(),this.dateTo=d(),this.Loading=!0,this.const_data={},this.const_data_cus={},this.currentUser={},this.const_arr=[],this.const_arr_cus=[],this.const_category=[],this.label=[],this.data=[],this.API="/reports/chartday",this.API_CUSTOMER="/reports/chartdaycustomer",this.API_CIRCLE="/reports/chartdaycircle",this.API_CATEGORY="/category",this.displayedColumns=["no","total","discount"],this.dateAdapter.setLocale("en-GB")}ngOnInit(){this.currentUser=this.authService.getParseTokenUser(),this.loadcategory()}changeDate(e,o,i){if("fromdate"==i){if(null==o.datepickerInput.value&&null==o.datepickerInput.value&&""==o.datepickerInput.value)return;var r="",h="";if(this.dateFrom=d(e.value),r=this.dateFrom.format("YYYY-MM-DD"),this.dateFrom=d(o.datepickerInput.value),"Invalid date"==(h=this.dateFrom.format("YYYY-MM-DD")))return;this.loaddata(r,h),this.loaddata_cus(r,h)}else if("todate"==i){if(null==o.datepickerInput.value&&null==o.datepickerInput.value&&""==o.datepickerInput.value)return;if(r="",h="",this.dateFrom=d(e.value),h=this.dateFrom.format("YYYY-MM-DD"),this.dateFrom=d(o.datepickerInput.value),"Invalid date"==(r=this.dateFrom.format("YYYY-MM-DD")))return;this.loaddata(r,h),this.loaddata_cus(r,h)}}loaddata(e,o){this.const_data={},this.Loading=!1,this._data.post(l.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id,{fromdate:e.toString(),todate:o.toString()}).subscribe(i=>{this.const_data=i||[],this.mapCategoryAndData(i||[]),console.table(this.const_data),this.Loading=!0},i=>{this.Loading=!0})}loaddata_cus(e,o){this.const_data_cus={},this.Loading=!1,this._data.post(l.r.BASE_SERVER+this.currentUser.ip+this.API_CUSTOMER+"/"+this.currentUser.tenant_id,{fromdate:e.toString(),todate:o.toString()}).subscribe(i=>{this.const_data_cus=i||[],this.mapCategoryAndDataCus(i||[]),console.table(this.const_data_cus),this.Loading=!0},i=>{this.Loading=!0})}loaddataCircle(e,o,i){this.Loading=!1,this._data.post(l.r.BASE_SERVER+this.currentUser.ip+this.API_CIRCLE+"/"+this.currentUser.tenant_id,{day:e.toString(),month:o.toString(),year:i.toString()}).subscribe(h=>{this.parseDataArrayString(h||[]),this.Loading=!0},h=>{this.Loading=!0})}loadcategory(){const e={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(l.r.BASE_SERVER+this.API_CATEGORY,e).subscribe(o=>{this.const_category=o||[],this.Loading=!0},o=>{this.Loading=!0})}mapCategoryAndData(e){var o;this.const_arr=[];var i="";null===(o=this.const_data)||void 0===o||o.data.forEach((r,h)=>{0==h?(this.const_arr.push({group:r.group}),this.const_arr.push({no:h+1,itemcode:r.itemcode,total:r.total,discount:r.discount})):(i==r.group||this.const_arr.push({group:r.group}),this.const_arr.push({no:h+1,itemcode:r.itemcode,total:r.total,discount:r.discount})),i=r.group}),console.table(this.const_arr),this.dataSource=this.const_arr}mapCategoryAndDataCus(e){var o,i;this.const_arr_cus=[],console.table(null===(o=this.const_data_cus)||void 0===o?void 0:o.data),null===(i=this.const_data_cus)||void 0===i||i.data.forEach((r,h)=>{this.const_arr_cus.push({no:h+1,Sl:r.Sl,total:r.total,discount:r.discount})}),console.table(this.const_arr_cus),this.dataSourceCus=this.const_arr_cus}parseDataArrayString(e){this.label=[],this.data=[],e?.data.forEach(o=>{this.label.push(o.group),this.data.push(o.total)}),this.doughnutChartMethod()}isGroup(e,o){return o.group}doughnutChartMethod(){null!=this.doughnutChart&&this.doughnutChart.destroy(),this.doughnutChart=new A.ZP(this.myChart.nativeElement,{type:"doughnut",data:{labels:this.label,datasets:[{label:"# of Vendor",data:this.data,backgroundColor:["rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(240,248,255,1)","rgba(0,255,255,1)","rgba(245,245,220,1)","rgba(0,0,255,1)","rgba(138,43,226,1)","rgba(165,42,42,1)","rgba(222, 184,135,1)","rgba(95,158,160,1)","rgba(127,255,0,1)","rgba(0,139,139,1)","rgba(255,140,0,1)","rgba(255,215,0,1)","rgba(0,128,0,1)"],hoverBackgroundColor:["#FFCE56","#FF6384","#36A2EB","#FFCE56","#FF6384","rgba(153, 102, 255, 0.2)","rgba(240,248,255,1)","rgba(0,255,255,1)","rgba(245,245,220,1)","rgba(0,0,255,1)","rgba(138,43,226,1)","rgba(165,42,42,1)","rgba(222, 184,135,1)","rgba(95,158,160,1)","rgba(127,255,0,1)","rgba(0,139,139,1)","rgba(255,140,0,1)","rgba(255,215,0,1)","rgba(0,128,0,1)"]}]}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C._A),t.Y36(Z.D),t.Y36(B.e))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-baocaodoanhthutheo-ngay"]],viewQuery:function(e,o){if(1&e&&t.Gf(N,5),2&e){let i;t.iGM(i=t.CRH())&&(o.myChart=i.first)}},decls:58,vars:12,consts:[["slot","start"],[3,"fullscreen"],[1,"ion-padding"],["appearance","fill","id","vendor-option",1,"w-100"],["matInput","","disabled","",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["disabled","false"],["dp3",""],["dp4",""],["label","B\u1ea3ng"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","no"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","total"],["style","justify-content: end;",4,"matCellDef"],["matColumnDef","discount"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["label","Bi\u1ec3u \u0111\u1ed3"],["id","bar-chart-container"],[2,"position","relative","height","20vh","width","40vw"],["myChart",""],["label","Doanh Thu v\xe0 S\u1ed1 L\u01b0\u1ee3ng Kh\xe1ch H\xe0ng"],["bgcolor","#000000",4,"ngIf"],[2,"justify-content","end"],["bgcolor","#000000"],["id","loader-wrapper"],["id","loader"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"B\xe1o c\xe1o doanh thu theo ng\xe0y"),t.qZA()()(),t.TgZ(6,"ion-content",1)(7,"div",2)(8,"p")(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"T\u1eeb ng\xe0y"),t.qZA(),t.TgZ(12,"input",4),t.NdJ("dateChange",function(h){t.CHM(i);const f=t.MAs(22);return t.KtG(o.changeDate(h,f,"fromdate"))}),t.qZA(),t._UZ(13,"mat-datepicker-toggle",5)(14,"mat-datepicker",6,7),t.qZA(),t.TgZ(16,"mat-form-field",3)(17,"mat-label"),t._uU(18,"\u0110\u1ebfn ng\xe0y"),t.qZA(),t.TgZ(19,"input",4),t.NdJ("dateChange",function(h){t.CHM(i);const f=t.MAs(15);return t.KtG(o.changeDate(h,f,"todate"))}),t.qZA(),t._UZ(20,"mat-datepicker-toggle",5)(21,"mat-datepicker",6,8),t.qZA()(),t.TgZ(23,"mat-tab-group")(24,"mat-tab",9)(25,"div")(26,"mat-table",10),t.ynx(27,11),t.YNc(28,T,2,0,"mat-header-cell",12),t.YNc(29,P,2,1,"mat-cell",13),t.BQk(),t.ynx(30,14),t.YNc(31,D,2,0,"mat-header-cell",12),t.YNc(32,S,3,6,"mat-cell",15),t.BQk(),t.ynx(33,16),t.YNc(34,U,2,0,"mat-header-cell",12),t.YNc(35,Y,3,6,"mat-cell",15),t.BQk(),t.YNc(36,M,1,0,"mat-header-row",17),t.YNc(37,R,1,0,"mat-row",18),t.qZA()()(),t.TgZ(38,"mat-tab",19)(39,"div",20),t._UZ(40,"canvas",21,22),t.qZA()()(),t.TgZ(42,"mat-tab-group")(43,"mat-tab",23)(44,"div")(45,"mat-table",10),t.ynx(46,11),t.YNc(47,x,2,0,"mat-header-cell",12),t.YNc(48,I,2,1,"mat-cell",13),t.BQk(),t.ynx(49,14),t.YNc(50,F,2,0,"mat-header-cell",12),t.YNc(51,L,3,6,"mat-cell",15),t.BQk(),t.ynx(52,16),t.YNc(53,Q,2,0,"mat-header-cell",12),t.YNc(54,w,3,6,"mat-cell",15),t.BQk(),t.YNc(55,J,1,0,"mat-header-row",17),t.YNc(56,k,1,0,"mat-row",18),t.qZA()()()()()(),t.YNc(57,G,3,0,"div",24)}if(2&e){const i=t.MAs(15),r=t.MAs(22);t.xp6(6),t.Q6J("fullscreen",!0),t.xp6(6),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(6),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(8),t.Q6J("dataSource",o.dataSourceCus),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",!o.Loading)}},dependencies:[g.O5,u.oU,u.Sm,u.W2,u.Gu,u.wd,u.sr,u.cs,m.Mq,m.hl,m.nW,E.Nt,p.KE,p.hX,p.R9,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,v.uX,v.SP,g.H9],styles:[".w-100[_ngcontent-%COMP%]{width:100%}  .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{background:white!important}table[_ngcontent-%COMP%]{width:100%}"]}),a})()}];let q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[y.Bz.forChild(j),y.Bz]}),a})();var H=s(5064);let O=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.ez,b.u5,u.Pc,H.q,q]}),a})()}}]);