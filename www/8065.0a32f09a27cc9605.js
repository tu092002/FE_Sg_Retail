"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8065],{8065:(gt,S,u)=>{u.r(S),u.d(S,{OrderDetailsPageModule:()=>ut});var m=u(6895),h=u(4006),s=u(8779),w=u(9299),v=u(655),V=u(1297),p=u(4631),I=u(9895),B=u(5439),P=u.n(B),t=u(4650),x=u(2468),T=u(9620),y=u(7388),M=u(2810),R=u(849),E=u(4377);function k(r,c){if(1&r&&(t.TgZ(0,"ion-row",22)(1,"ion-row",23)(2,"span",8),t._uU(3),t.qZA()(),t.TgZ(4,"ion-row",8),t._UZ(5,"ion-col",24),t.TgZ(6,"ion-col",25),t._uU(7),t.qZA(),t.TgZ(8,"ion-col",26),t._uU(9),t.ALo(10,"currency"),t.qZA()()()),2&r){const e=c.$implicit;t.xp6(3),t.hij("",e.itemname," "),t.xp6(4),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",t.gM2(10,3,(null==e?null:e.price)*e.quantity,"VND ","symbol","1.0")," ")}}let F=(()=>{class r{constructor(e,o,n,a,l,i,d,g,f){this._data=e,this.ble=o,this.ngZore=n,this.alertController=a,this.modalCtrl=l,this.config=i,this.bluetoothBillService=d,this.storage=g,this.authService=f,this.configsetting={},this.currentUser={},this.date=P()(),this.Loading=!0,this.API_CONFIGSETTING="/configsetting",this.idDevice=""}ngOnInit(){this.currentUser=this.authService.getParseTokenUser(),this.loadDataConfigSettings(),this.storage.get("idDevice").then(e=>{this.idDevice=e})}loadDataConfigSettings(){const e={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(p.r.BASE_SERVER+this.API_CONFIGSETTING,e).subscribe(o=>{this.configsetting=o||[],this.setValueConfigSettings(o||[]),this.Loading=!0},o=>{this.Loading=!0})}setValueConfigSettings(e){this.configsetting=e?.data[0]}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.modalCtrl.dismiss("Done","confirm")}print(){var e,o,n,a,l,i,d,g,f,C,b,O,U;return(0,v.mG)(this,void 0,void 0,function*(){let Z;var N;this.date=P()(null===(e=this.data)||void 0===e?void 0:e.CreatedAt),N=this.date.format("DD/MM/YYYY"),Z=`${null===(o=this.configsetting)||void 0===o?void 0:o.company}\n\u0110/c: ${null===(n=this.configsetting)||void 0===n?void 0:n.address}\nS\u0110T: ${null===(a=this.configsetting)||void 0===a?void 0:a.phone}\n-------------------------------\n\t H\xd3A \u0110\u01a0N\n\t${N}\nH\u0110: ${null===(l=this.data)||void 0===l?void 0:l.ID}\nS\u1ed1: ${null===(i=this.data)||void 0===i?void 0:i.tablenumber}\nGhi ch\xfa: ${null===(d=this.data)||void 0===d?void 0:d.remarks}\n-------------------------------\nS\u1ea3n ph\u1ea9m\tSL\tGia\n`,null===(g=this.data)||void 0===g||g.orderDetails.forEach(_=>{Z+=`${_.itemname}\n\t${_.quantity}\t${(_.price*_.quantity).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}\n`}),Z+=`-------------------------------\nTh\xe0nh ti\u1ec1n:\t\t${null===(f=this.data)||void 0===f?void 0:f.total.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}\nGi\u1ea3m gi\xe1:\t\t\t${null===(C=this.data)||void 0===C?void 0:C.discout}%\nT\u1ed5ng ti\u1ec1n:\t\t${null===(b=this.data)||void 0===b?void 0:b.doctotal.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}\nKh\xe1ch tr\u1ea3:\t\t${null===(O=this.data)||void 0===O?void 0:O.customerpay.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}\nTr\u1ea3 l\u1ea1i:\t\t${null===(U=this.data)||void 0===U?void 0:U.refund.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}\n\tC\u1ea3m \u01a1n qu\xfd kh\xe1ch!\n\tCung c\u1ea5p b\u1edfi FTISG\n\n\n\n\n\n`;let ct=this.stringToBytes(this.toNonAccentVietnamese(Z));this.ble.write(this.idDevice,"18F0","2AF1",ct).then(function(_){alert("Connect : "+JSON.stringify(_))}).catch(function(_){alert("Error ___ "+JSON.stringify(_))}),Z=""})}stringToBytes(e){for(var o=new Uint8Array(e.length),n=0,a=e.length;n<a;n++)o[n]=e.charCodeAt(n);return o.buffer}toNonAccentVietnamese(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/A|\xc1|\xc0|\xc3|\u1ea0|\xc2|\u1ea4|\u1ea6|\u1eaa|\u1eac|\u0102|\u1eae|\u1eb0|\u1eb4|\u1eb6/g,"A")).replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/E|\xc9|\xc8|\u1ebc|\u1eb8|\xca|\u1ebe|\u1ec0|\u1ec4|\u1ec6/,"E")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/I|\xcd|\xcc|\u0128|\u1eca/g,"I")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/O|\xd3|\xd2|\xd5|\u1ecc|\xd4|\u1ed0|\u1ed2|\u1ed6|\u1ed8|\u01a0|\u1eda|\u1edc|\u1ee0|\u1ee2/g,"O")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/U|\xda|\xd9|\u0168|\u1ee4|\u01af|\u1ee8|\u1eea|\u1eee|\u1ef0/g,"U")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/Y|\xdd|\u1ef2|\u1ef8|\u1ef4/g,"Y")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0110/g,"D")).replace(/\u0111/g,"d")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(x.D),t.Y36(T.I),t.Y36(t.R0b),t.Y36(s.Br),t.Y36(s.IN),t.Y36(y.o),t.Y36(M.j),t.Y36(R.K),t.Y36(E.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-show-bill"]],decls:70,vars:22,consts:[["slot","start"],["color","medium",3,"click"],["slot","end",2,"font-size","1.8em","margin-right","15px",3,"click"],["name","print-outline"],[1,"ion-padding"],[2,"padding","10px"],["id","PrintInvoice",1,"invoice-box",2,"width","100%"],[2,"width","100%","text-align","center","padding-bottom","20px"],[2,"width","100%"],[2,"border-bottom","1px dashed black"],[2,"font-size","1em","padding-bottom","5px","width","100%"],[2,"margin-top","5px"],["size","auto",2,"float","left","padding-left","0","padding-right","0"],[2,"float","right","text-align","end"],[2,"margin-top","10px","margin-bottom","10px","border-bottom","0px dotted rgb(71, 71, 71)"],[2,"width","13.4%","padding","0px","vertical-align","top","font-weight","bold"],[2,"width","43.4%","padding","0px","vertical-align","top","text-align","center","font-weight","bold"],[2,"width","43.4%","padding","0px","vertical-align","top","text-align","end","font-weight","bold"],["style","border-bottom:1px dashed black; margin-bottom:10px",4,"ngFor","ngForOf"],[2,"padding","0px","vertical-align","top","text-align","right","font-weight","bold"],[2,"text-align","center","font-style","italic","padding-top","20px"],["alt","","src","../../../../../../assets/images/user.jpg",2,"margin-left","auto","margin-right","auto","display","block","justify-content","center","height","100px","width","100px","object-fit","contain"],[2,"border-bottom","1px dashed black","margin-bottom","10px"],[2,"max-width","100%"],[2,"width","13.4%","padding","5px","vertical-align","top"],[2,"width","50.4%","padding","0px","vertical-align","top","text-align","center"],[2,"width","43.4%","padding","0px","vertical-align","top","text-align","end"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return o.cancel()}),t._uU(4,"Cancel"),t.qZA()(),t._UZ(5,"ion-title"),t.TgZ(6,"ion-buttons",2),t.NdJ("click",function(){return o.print()}),t._UZ(7,"ion-icon",3),t.qZA()()(),t.TgZ(8,"ion-content",4)(9,"div",5)(10,"ion-grid",6)(11,"ion-row",7)(12,"span",8),t._uU(13,"HO\xc1 \u0110\u01a0N"),t.qZA(),t.TgZ(14,"span",8)(15,"b"),t._uU(16,"Ng\xe0y t\u1ea1o:"),t.qZA(),t._uU(17),t.ALo(18,"date"),t.qZA()(),t.TgZ(19,"ion-row",9)(20,"span",10)(21,"b"),t._uU(22,"T\xean:"),t.qZA(),t._uU(23),t.qZA(),t._UZ(24,"br"),t.TgZ(25,"span",10)(26,"b"),t._uU(27,"\u0110\u1ecba ch\u1ec9:"),t.qZA(),t._uU(28),t.qZA(),t._UZ(29,"br"),t.TgZ(30,"span",10)(31,"b"),t._uU(32,"Ghi ch\xfa:"),t.qZA(),t._uU(33),t.qZA(),t._UZ(34,"br"),t.TgZ(35,"span",10)(36,"b"),t._uU(37,"Ho\xe1 \u0111\u01a1n:"),t.qZA(),t._uU(38),t.qZA(),t._UZ(39,"br"),t.qZA(),t.TgZ(40,"ion-row",11)(41,"ion-col",12)(42,"div",8),t._uU(43,"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n:"),t.qZA()(),t.TgZ(44,"ion-col",13),t._uU(45,"TM/CK"),t.qZA()(),t.TgZ(46,"ion-row",9),t._UZ(47,"ion-col",13),t.qZA(),t.TgZ(48,"ion-row",14)(49,"ion-col",15),t._uU(50,"S\u1ea3n ph\u1ea9m"),t.qZA(),t.TgZ(51,"ion-col",16),t._uU(52,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(53,"ion-col",17),t._uU(54,"Gi\xe1"),t.qZA()(),t.YNc(55,k,11,8,"ion-row",18),t.TgZ(56,"ion-row")(57,"ion-col",19),t._uU(58),t.ALo(59,"currency"),t.qZA()(),t.TgZ(60,"ion-row")(61,"ion-col",19),t._uU(62),t.qZA()(),t.TgZ(63,"ion-row")(64,"ion-col",19),t._uU(65),t.ALo(66,"currency"),t.qZA()(),t.TgZ(67,"p",20),t._uU(68,"C\u1ea3m \u01a1n qu\xfd kh\xe1ch!"),t.qZA(),t._UZ(69,"img",21),t.qZA()()()),2&e&&(t.xp6(17),t.hij("\xa0",t.xi3(18,9,null==o.data?null:o.data.CreatedAt,"dd/MM/yyyy"),""),t.xp6(6),t.hij("\xa0 ",null==o.configsetting?null:o.configsetting.company," "),t.xp6(5),t.hij("\xa0 ",null==o.configsetting?null:o.configsetting.address," "),t.xp6(5),t.hij("\xa0",null==o.data?null:o.data.tablenumber,""),t.xp6(5),t.hij("\xa0",null==o.data?null:o.data.ID,""),t.xp6(17),t.Q6J("ngForOf",null==o.data?null:o.data.orderDetails),t.xp6(3),t.hij(" Th\xe0nh ti\u1ec1n: ",t.gM2(59,12,null==o.data?null:o.data.total,"VND ","symbol","1.0")," "),t.xp6(4),t.hij(" Gi\u1ea3m gi\xe1: ",null==o.data?null:o.data.discout," % "),t.xp6(3),t.hij(" T\u1ed5ng ti\u1ec1n: ",t.gM2(66,17,null==o.data?null:o.data.doctotal,"VND ","symbol","1.0")," "))},dependencies:[m.sg,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Nd,s.wd,s.sr,m.H9,m.uU],styles:["ion-toolbar[_ngcontent-%COMP%]{--height: 56px}ion-content[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]{height:54px;margin-top:10px;box-shadow:0 5px 10px 5px #eeeeee9e;z-index:5}ion-content[_ngcontent-%COMP%]::part(scroll){padding:0}#selectOptionWhsCode[_ngcontent-%COMP%]{display:flex;width:100%}#selectOptionWhsCode[_ngcontent-%COMP%]   #item-left[_ngcontent-%COMP%]{flex:1;width:100%;padding-left:25px}#selectOptionWhsCode[_ngcontent-%COMP%]   #item-right[_ngcontent-%COMP%]{flex:2;width:100%}#selectOptionWhsCode[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){border-radius:0!important;box-shadow:none!important}#selectOptionWhsCode[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native)   .item-inner[_ngcontent-%COMP%] {border:0;--border: 0}#icon-saveItem[_ngcontent-%COMP%] {background:transparent!important;color:#6495ed!important;position:absolute;right:0}#PrintInvoice[_ngcontent-%COMP%]{width:100%;position:relative;top:0;background:white;z-index:10}"]}),r})();var j=u(8675),L=u(4004);function Y(r,c){if(1&r&&(t.TgZ(0,"ion-row",24)(1,"ion-row",25)(2,"span",9),t._uU(3),t.qZA()(),t.TgZ(4,"ion-row",9),t._UZ(5,"ion-col",26),t.TgZ(6,"ion-col",27),t._uU(7),t.qZA(),t.TgZ(8,"ion-col",28),t._uU(9),t.ALo(10,"currency"),t.qZA()()()),2&r){const e=c.$implicit;t.xp6(3),t.hij("",e.itemname," "),t.xp6(4),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",t.gM2(10,3,(null==e?null:e.price)*e.quantity,"\u0111 ","symbol","1.0")," ")}}function W(r,c){if(1&r&&(t.TgZ(0,"ion-grid",6)(1,"ion-row",7)(2,"span",8),t._uU(3,"HO\xc1 \u0110\u01a0N"),t.qZA(),t.TgZ(4,"span",9)(5,"b"),t._uU(6,"Ng\xe0y t\u1ea1o:"),t.qZA(),t._uU(7),t.ALo(8,"date"),t.qZA()(),t.TgZ(9,"ion-row",10)(10,"span",11),t._uU(11),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"span",12)(14,"b"),t._uU(15,"\u0110\u1ecba ch\u1ec9:"),t.qZA(),t._uU(16),t.qZA(),t._UZ(17,"br"),t.TgZ(18,"span",12)(19,"b"),t._uU(20,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"),t.qZA(),t._uU(21),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"span",12)(24,"b"),t._uU(25,"Ghi ch\xfa:"),t.qZA(),t._uU(26),t.qZA(),t._UZ(27,"br"),t.TgZ(28,"span",12)(29,"b"),t._uU(30,"Ho\xe1 \u0111\u01a1n:"),t.qZA(),t._uU(31),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"span",12)(34,"b"),t._uU(35,"Gi\u1edd ra: "),t.qZA(),t._uU(36),t.ALo(37,"date"),t.qZA(),t._UZ(38,"br"),t.TgZ(39,"span",12)(40,"b"),t._uU(41,"Gi\u1edd ra: "),t.qZA(),t._uU(42),t.ALo(43,"date"),t.qZA(),t._UZ(44,"br"),t.qZA(),t.TgZ(45,"ion-row",13)(46,"ion-col",14)(47,"div",9),t._uU(48,"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n:"),t.qZA()(),t.TgZ(49,"ion-col",15),t._uU(50,"TM/CK"),t.qZA()(),t.TgZ(51,"ion-row",16)(52,"ion-col",17),t._uU(53,"S\u1ea3n ph\u1ea9m"),t.qZA(),t.TgZ(54,"ion-col",18),t._uU(55,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(56,"ion-col",19),t._uU(57,"Gi\xe1"),t.qZA()(),t.YNc(58,Y,11,8,"ion-row",20),t.TgZ(59,"ion-row")(60,"ion-col",21),t._uU(61),t.ALo(62,"currency"),t.qZA()(),t.TgZ(63,"ion-row")(64,"ion-col",21),t._uU(65),t.qZA()(),t.TgZ(66,"ion-row")(67,"ion-col",22),t._uU(68),t.ALo(69,"currency"),t.qZA()(),t.TgZ(70,"p",23),t._uU(71,"C\u1ea3m \u01a1n qu\xfd kh\xe1ch"),t.qZA(),t.TgZ(72,"p",23),t._uU(73,"Make by FTI S\xe0i G\xf2n"),t.qZA(),t._UZ(74,"br"),t.qZA()),2&r){const e=t.oxw();t.xp6(7),t.hij("\xa0",t.xi3(8,12,null==e.data?null:e.data.CreatedAt,"dd/MM/yyyy"),""),t.xp6(4),t.hij(" ",null==e.configsetting?null:e.configsetting.company," "),t.xp6(5),t.hij("\xa0",null==e.configsetting?null:e.configsetting.address,""),t.xp6(5),t.hij("\xa0",null==e.configsetting?null:e.configsetting.phone,""),t.xp6(5),t.hij("\xa0",null==e.data?null:e.data.tablenumber,""),t.xp6(5),t.hij("\xa0",null==e.data?null:e.data.ID,""),t.xp6(5),t.hij("\xa0",t.xi3(37,15,e.datetimeHHmm,"dd/MM/yyyy HH:mm"),""),t.xp6(6),t.hij("\xa0",t.xi3(43,18,e.datetimeHHmm,"dd/MM/yyyy HH:mm"),""),t.xp6(16),t.Q6J("ngForOf",null==e.data?null:e.data.orderDetails),t.xp6(3),t.hij(" Th\xe0nh ti\u1ec1n: ",t.gM2(62,21,null==e.data?null:e.data.total,"\u0111 ","symbol","1.0")," "),t.xp6(4),t.hij(" Gi\u1ea3m gi\xe1: ",null==e.data?null:e.data.discout," % "),t.xp6(3),t.hij(" T\u1ed5ng ti\u1ec1n: ",t.gM2(69,26,null==e.data?null:e.data.doctotal,"\u0111 ","symbol","1.0")," ")}}let J=(()=>{class r{constructor(e,o,n,a,l,i,d){this._data=e,this.ble=o,this.ngZore=n,this.alertController=a,this.modalCtrl=l,this.config=i,this.authService=d,this.configsetting={},this.currentUser={},this.date=P()(),this.Loading=!0,this.datetimeHHmm=new Date,this.API_CONFIGSETTING="/configsetting",this.BASE_SERVERS=p.r.BASE_SERVER+"/",this.idDevice=""}ngOnInit(){this.currentUser=this.authService.getParseTokenUser(),this.loadDataConfigSettings()}print(){window.focus(),window.print(),window.close()}confirm(){return this.modalCtrl.dismiss("Done","confirm")}loadDataConfigSettings(){const e={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(p.r.BASE_SERVER+this.API_CONFIGSETTING,e).subscribe(o=>{this.configsetting=o||[],this.setValueConfigSettings(o||[]),this.Loading=!0},o=>{this.Loading=!0})}setValueConfigSettings(e){this.configsetting=e?.data[0]}cancel(){return this.modalCtrl.dismiss(null,"cancel")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(x.D),t.Y36(T.I),t.Y36(t.R0b),t.Y36(s.Br),t.Y36(s.IN),t.Y36(y.o),t.Y36(E.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-show-bill-web"]],decls:11,vars:2,consts:[["slot","start"],["color","medium",3,"click"],["slot","end",2,"font-size","1.8em","margin-right","15px",3,"click"],["name","print-outline"],["alt","",2,"margin-left","auto","margin-right","auto","display","block","justify-content","center","height","120px","width","120px","object-fit","contain",3,"src"],["id","PrintInvoice","class","invoice-box","style","width: 100%;",4,"ngIf"],["id","PrintInvoice",1,"invoice-box",2,"width","100%"],[2,"width","100%","text-align","center","padding-bottom","20px"],[2,"width","100%","font-size","16px"],[2,"width","100%"],[2,"border-bottom","1px dashed black"],[2,"font-size","1.75em","padding-bottom","5px","width","100%"],[2,"font-size","1em","padding-bottom","5px","width","100%"],[2,"margin-top","5px"],["size","auto",2,"float","left","padding-left","0","padding-right","0"],[2,"float","right","text-align","end","padding-right","15px"],[2,"margin-top","10px","margin-bottom","10px","border-bottom","0px dotted rgb(71, 71, 71)"],[2,"width","13.4%","padding","0px","vertical-align","top","font-weight","bold"],[2,"width","43.4%","padding","0px","vertical-align","top","text-align","center","font-weight","bold"],[2,"width","43.4%","padding","0px","vertical-align","top","text-align","end","font-weight","bold","padding-right","15px"],["style","border-bottom:1px dashed black; margin-bottom:10px",4,"ngFor","ngForOf"],[2,"padding","0px","vertical-align","top","text-align","right","font-weight","bold","padding-right","15px","font-size","12px"],[2,"padding","0px","vertical-align","top","text-align","right","font-weight","bold","padding-right","15px","font-size","14px"],[2,"text-align","center","font-style","italic","margin","0"],[2,"border-bottom","1px dashed black","margin-bottom","10px"],[2,"max-width","100%"],[2,"width","13.4%","padding","5px","vertical-align","top"],[2,"width","50.4%","padding","0px","vertical-align","top","text-align","center"],[2,"width","43.4%","padding","0px","vertical-align","top","text-align","end","padding-right","15px"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return o.cancel()}),t._uU(4,"Cancel"),t.qZA()(),t._UZ(5,"ion-title"),t.TgZ(6,"ion-buttons",2),t.NdJ("click",function(){return o.print()}),t._UZ(7,"ion-icon",3),t.qZA()()(),t.TgZ(8,"ion-content"),t._UZ(9,"img",4),t.YNc(10,W,75,31,"ion-grid",5),t.qZA()),2&e&&(t.xp6(9),t.s9C("src",o.BASE_SERVERS+(null==o.configsetting?null:o.configsetting.image),t.LSH),t.xp6(1),t.Q6J("ngIf",!0))},dependencies:[m.sg,m.O5,s.YG,s.Sm,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Nd,s.wd,s.sr,m.H9,m.uU],styles:["ion-toolbar[_ngcontent-%COMP%]{--height: 56px}ion-content[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]{height:54px;margin-top:10px;box-shadow:0 5px 10px 5px #eeeeee9e;z-index:5}ion-content[_ngcontent-%COMP%]::part(scroll){padding:0}#selectOptionWhsCode[_ngcontent-%COMP%]{display:flex;width:100%}#selectOptionWhsCode[_ngcontent-%COMP%]   #item-left[_ngcontent-%COMP%]{flex:1;width:100%;padding-left:25px}#selectOptionWhsCode[_ngcontent-%COMP%]   #item-right[_ngcontent-%COMP%]{flex:2;width:100%}#selectOptionWhsCode[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){border-radius:0!important;box-shadow:none!important}#selectOptionWhsCode[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native)   .item-inner[_ngcontent-%COMP%] {border:0;--border: 0}#icon-saveItem[_ngcontent-%COMP%] {background:transparent!important;color:#6495ed!important;position:absolute;right:0}#PrintInvoice[_ngcontent-%COMP%]{width:100%;position:relative;top:0;background:white;z-index:10}","#PrintInvoice[_ngcontent-%COMP%] {\n    display: block;\n    font-size: 0.5rem;\n    font-weight: bold;\n  }"]}),r})();var H=u(5904),D=u(3805),$=u(3238),Q=u(4859),A=u(3546),z=u(7392),K=u(4144),G=u(9549),X=u(3162),q=u(3848);const tt=["valuesinput"];function et(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openQuenstion(n.formGroup.value))}),t._UZ(1,"ion-icon",34),t.qZA()}}function ot(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"ion-button",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.showBillModal())}),t._UZ(1,"ion-icon",35),t.qZA()}}function nt(r,c){if(1&r&&(t.TgZ(0,"ion-select-option",46),t._uU(1),t.qZA()),2&r){const e=c.$implicit;t.Q6J("value",e.whscode),t.xp6(1),t.Oqu(e.whsname)}}function it(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"mat-card",36),t._UZ(1,"img",37),t.TgZ(2,"mat-card-actions",15)(3,"p")(4,"ion-label"),t._uU(5),t.qZA()(),t.TgZ(6,"p",38)(7,"ion-label",39),t._uU(8,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(9,"ion-input",40,41),t.NdJ("change",function(n){const l=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.changeQty(n,l.itemcode))}),t.qZA()(),t.TgZ(11,"p",38)(12,"ion-label",42),t._uU(13,"Gi\xe1"),t.qZA(),t.TgZ(14,"ion-label",43),t._uU(15),t.ALo(16,"currency"),t.qZA()(),t.TgZ(17,"p",38)(18,"ion-label",42),t._uU(19,"TT"),t.qZA(),t.TgZ(20,"ion-label",43),t._uU(21),t.ALo(22,"currency"),t.qZA()(),t.TgZ(23,"p",38)(24,"ion-label",42),t._uU(25,"Kho"),t.qZA(),t.TgZ(26,"ion-select",44),t.NdJ("ionChange",function(n){const l=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.changeWhsCode(n,l.itemcode))}),t.YNc(27,nt,2,2,"ion-select-option",23),t.qZA()()(),t.TgZ(28,"mat-card-footer"),t._UZ(29,"mat-progress-bar",45),t.qZA()()}if(2&r){const e=c.$implicit,o=t.oxw();t.xp6(1),t.s9C("src",o.BASE_SERVERS+e.image,t.LSH),t.xp6(4),t.Oqu(null==e?null:e.itemname),t.xp6(4),t.Q6J("value",null==e?null:e.quantity),t.xp6(6),t.Oqu(t.gM2(16,7,null==e?null:e.price,"\u0111 ","symbol","1.0")),t.xp6(6),t.Oqu(t.gM2(22,12,(null==e?null:e.quantity)*(null==e?null:e.price),"\u0111 ","symbol","1.0")),t.xp6(5),t.s9C("value",e.whscode),t.xp6(1),t.Q6J("ngForOf",null==o.warehouse?null:o.warehouse.data)}}function at(r,c){if(1&r&&(t.TgZ(0,"mat-option",46,47)(2,"span"),t._uU(3),t.qZA(),t._uU(4," | "),t.TgZ(5,"small"),t._uU(6),t.qZA()()),2&r){const e=c.$implicit;t.Q6J("value",null==e?null:e.cardcode),t.xp6(3),t.Oqu(null==e?null:e.cardcode),t.xp6(3),t.hij(" ",null==e?null:e.cardname,"")}}function rt(r,c){1&r&&(t.TgZ(0,"div",48)(1,"div",49),t._UZ(2,"div",50),t.qZA()())}const lt=[{path:"",component:(()=>{class r{constructor(e,o,n,a,l,i,d){this.route=e,this._data=o,this.formBuilder=n,this.navCtrl=a,this.pdfGenerator=l,this.modalCtrl=i,this.authService=d,this.order_details=[],this.order={},this.const_bp={},this._nxt={},this.currentUser={},this.valueForm="",this.dynamictype="number",this.API="/order",this.API_Order="/order",this.API_Order_Detail="/orderDetail",this.API_Table="/table",this.API_BP="/business",this.API_UpdateCreateOrderDetail="/orderDetail/updateandinsert",this.BASE_SERVERS=p.r.BASE_SERVER+"/",this.API_NXT_WhsItem="/viewnxt/whsitem",this.imgDefault="../../../../../../assets/images/imgdefault.jpeg",this.Loading=!0,this.headerMenu="",this.totalValues=0,this.totalSum=0,this.change=0,this.discount=0,this.quantity=1,this.send=0,this.warehouse={},this.items={},this.API_WAREHOUSE="/warehouse",this.API_ITEMS="/items",this.showPayment=!1,this.statusPrint="",this.myControlCardCode=new h.NI(""),this.currentUser=this.authService.getParseTokenUser(),this.loadDataWarehouse()}ngOnInit(){this.currentUser=this.authService.getParseTokenUser(),this.loaddata_bp(),this.createForm1(),this.loaddata(),this.loaddataItems(),this.createFormSelection(),this.order={}}createForm1(){this.formGroup1=this.formBuilder.group({cardcode:[null],cardname:[null]}),this.formGroup1.controls.cardname.disable()}confirm(e,o,n=0,a=0,l=0,i,d=0){this.order_details=[]}loaddata(){this.Loading=!1,this.createForm();const e=+this.route.snapshot.params.id;null!=e||null!=e?this._data.get(p.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id+`/${e}`).subscribe(o=>{var n;this.order=o||[],this.setValue(null===(n=this.order)||void 0===n?void 0:n.data),this.Loading=!0},o=>{this.Loading=!0}):this.Loading=!0}loaddataItems(){const e={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(p.r.BASE_SERVER+this.API_ITEMS,e).subscribe(o=>{this.items=o||[],this.setValueItems(o||[]),this.Loading=!0},o=>{this.Loading=!0})}loadDataWarehouse(){const e={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(p.r.BASE_SERVER+this.API_WAREHOUSE,e).subscribe(o=>{this.warehouse=o||[],this.Loading=!0},o=>{this.Loading=!0})}setValueItems(e){this.items=e?.data}loaddata_bp(){const e={tenant_id:this.currentUser.tenant_id};this.Loading=!1,this._data.get2(p.r.BASE_SERVER+this.API_BP,e).subscribe(o=>{this.setDataBP(o||[]),this.Loading=!0},o=>{this.Loading=!0})}setDataBP(e){this.const_bp=e,this.autocompateCardCode()}setValue(e){setTimeout(()=>{var o,n,a,l;this.Loading=!1,this.formGroup.controls.tablename.setValue(e.tablename),this.formGroup.controls.tablenumber.setValue(e.tablenumber),this.formGroup.controls.remarks.setValue(e.remarks),this.formGroup.controls.cardcode.setValue(e?.cardcode),this.formGroup.controls.cardname.setValue(e?.cardname),this.formGroup.controls.docdate.setValue(e.docdate),this.formGroup.controls.total.setValue(e.total.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.discount.setValue(e.discout),this.formGroup.controls.discountTP.setValue((Number(e.total)*Number(e.discout)/100).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.doctotal.setValue(e.doctotal.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.customerpay.setValue(e.customerpay.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.refund.setValue(e.refund.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),null===(n=null===(o=this.order)||void 0===o?void 0:o.data)||void 0===n||n.orderDetails.map(i=>i.hide=!0),this.formGroup.controls.tablename.disable(),this.formGroup.controls.tablenumber.disable(),"off"==e.viewpayment?(this.showPayment=!0,this.formGroup.disable()):this.showPayment=!1,null===(l=null===(a=this.order)||void 0===a?void 0:a.data)||void 0===l||l.orderDetails.forEach(i=>{this.items.forEach(d=>{i.itemcode==d.itemcode&&(this.loadDataWhsCode(d.whscode,d.itemcode),i.image=d.image)})})},1e3),setTimeout(()=>{this.Loading=!0},1e3)}createForm(){this.formGroup=this.formBuilder.group({tablename:[null],tablenumber:[null,h.kI.required],docdate:[Date],remarks:[null],group:[null,h.kI.required],phone:[0],total:[0],discount:[0],discountTP:[0],doctotal:[0],customerpay:[0],refund:[0],vat:[0],creator:[null],cardcode:[null],cardname:[null]}),this.formGroup.controls.cardname.disable()}createFormSelection(){this.formGroupSelectOption=this.formBuilder.group({whscodeoption:[null]})}editForm(e){var o,n,a;const l=+this.route.snapshot.params.id;var i={};i.tablename=this.formGroup.getRawValue().tablename,i.remarks=this.formGroup.getRawValue().remarks,i.cardcode=this.myControlCardCode.value,i.cardname=null==this.myControlCardCode.value||""===this.myControlCardCode.value?"":null===(o=this.const_bp)||void 0===o?void 0:o.data.find(d=>d.cardcode==this.myControlCardCode.value?d.cardname:"").cardname,i.tablenumber=this.formGroup.getRawValue().tablenumber,i.total=Number(this.formGroup.getRawValue().total.replace(/,/g,"")),i.discount=Number(this.formGroup.getRawValue().discount),i.doctotal=Number(this.formGroup.getRawValue().doctotal.replace(/,/g,"")),i.refund=Number(this.formGroup.getRawValue().refund.replace(/,/g,"")),i.viewpayment="save","TT"==this.statusPrint&&(i.customerpay=0==i.discount?i.doctotal.toString():Number(this.formGroup.getRawValue().customerpay.replace(/,/g,"")).toString()),this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id+`/${l}`,i).subscribe(d=>{this._data.showUpdateSuccess(i.tablenumber)}),null===(a=null===(n=this.order)||void 0===n?void 0:n.data)||void 0===a||a.orderDetails.forEach(d=>{var g;g={idorder:l,itemcode:d.itemcode,itemname:d.itemname,quantity:Number(d.quantity),price:Number(d.price),tax:0,whscode:d.whscode,status:"save"},d.id=d.ID||d.id,"save"!=d.status?this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API_UpdateCreateOrderDetail+"/"+this.currentUser.tenant_id+`/${l}`,g).subscribe(f=>{this._data.showUpdateSuccess(g.itemcode)}):this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API_Order_Detail+"/"+this.currentUser.tenant_id+`/${d.id}`,g).subscribe(f=>{this._data.showUpdateSuccess(i.tablenumber)})})}saveBill(e,o){var n;const a=+this.route.snapshot.params.id;var l={};l.tablename=this.formGroup.getRawValue().tablename,l.tablenumber=this.formGroup.getRawValue().tablenumber,l.remarks=this.formGroup.getRawValue().remarks,l.cardcode=this.myControlCardCode.value,l.cardname=null==this.myControlCardCode.value||""===this.myControlCardCode.value?"":null===(n=this.const_bp)||void 0===n?void 0:n.data.find(d=>d.cardcode==this.myControlCardCode.value?d.cardname:"").cardname,l.total=Number(this.formGroup.getRawValue().total.replace(/,/g,"")),l.discount=Number(this.formGroup.getRawValue().discount),l.doctotal=Number(this.formGroup.getRawValue().doctotal.replace(/,/g,"")),l.refund=Number(this.formGroup.getRawValue().refund.replace(/,/g,"")),"TT"==this.statusPrint&&(l.customerpay=0==l.discount?l.doctotal.toString():Number(this.formGroup.getRawValue().customerpay.replace(/,/g,"")).toString());var i={idorder:a,itemcode:e.itemcode,itemname:e.itemname,quantity:Number(e.quantity),price:Number(e.price),tax:0,whscode:e.whscode,status:"save"};this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id+`/${a}`,l).subscribe(d=>{this._data.showUpdateSuccess(l.tablenumber)}),this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API_UpdateCreateOrderDetail+"/"+this.currentUser.tenant_id+`/${a}`,i).subscribe(d=>{this._data.showUpdateSuccess(i.itemcode)}),this.loaddata()}openModal(){var e,o,n,a;return(0,v.mG)(this,void 0,void 0,function*(){const l=yield this.modalCtrl.create({component:V.t,componentProps:{data:null===(o=null===(e=this.order)||void 0===e?void 0:e.data)||void 0===o?void 0:o.orderDetails},backdropDismiss:!1});l.present();const{data:i}=yield l.onWillDismiss();var g=0,f=0;this.order_details=i,null===(a=null===(n=this.order)||void 0===n?void 0:n.data)||void 0===a||a.orderDetails.forEach(b=>{g+=b.quantity*b.price}),this.formGroup.controls.total.setValue(g.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),f=Number(g)-Number(g)*(Number(this.formGroup.getRawValue().discount)/100),this.formGroup.controls.doctotal.setValue(f.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),Number(this.formGroup.getRawValue().customerpay.split(",").join("")),this.formGroup.controls.discountTP.setValue((Number(g)*Number(this.formGroup.getRawValue().discount)/100).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroupSelectOption.controls.whscodeoption.setValue("01")})}changeRefun(e){this.formGroup.controls.refund.setValue((Number(e.srcElement.value.replace(/,/g,""))-Number(this.formGroup.value.doctotal.replace(/,/g,""))).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))}changeDiscount(e){this.formGroup.controls.doctotal.setValue((Number(this.formGroup.value.total.replace(/,/g,""))-Number(this.formGroup.value.total.replace(/,/g,""))*Number(e.srcElement.value)/100).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.discountTP.setValue((Number(this.formGroup.value.total.replace(/,/g,""))*Number(this.formGroup.getRawValue().discount)/100).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.refund.setValue((Number(e.srcElement.value.replace(/,/g,""))-Number(this.formGroup.value.doctotal.replace(/,/g,""))).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))}changeQty(e,o){var n,a,i,l=0;null===(a=null===(n=this.order)||void 0===n?void 0:n.data)||void 0===a||a.orderDetails.forEach(g=>{g.itemcode==o&&(g.quantity=Number(e.srcElement.value)),l+=g.quantity*g.price}),this.formGroup.controls.total.setValue(l),i=Number(l)-Number(l)*(Number(this.formGroup.getRawValue().discount)/100),this.formGroup.controls.doctotal.setValue(i),Number(this.formGroup.getRawValue().customerpay.split(",").join("")),this.formGroup.controls.doctotal.setValue(this.formGroup.getRawValue().doctotal.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.total.setValue(this.formGroup.getRawValue().total.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.discountTP.setValue((Number(this.formGroup.value.total.replace(/,/g,""))*Number(this.formGroup.getRawValue().discount)/100).toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))}paymentHiden(){this.showPayment=!this.showPayment}loadDataWhsCode(e,o){this._data.post(p.r.BASE_SERVER+this.currentUser.ip+this.API_NXT_WhsItem+"/"+this.currentUser.tenant_id,{WhsCode:e,ItemCode:o}).subscribe(n=>{this.setValueNXT(n||[])})}changeWhsCode(e,o){this.loadDataWhsCode(e.srcElement.value,o),setTimeout(()=>{var n,a;null===(a=null===(n=this.order)||void 0===n?void 0:n.data)||void 0===a||a.orderDetails.forEach(l=>{l.itemcode===o&&(l.whscode=e.srcElement.value,l.ton=""==this._nxt.quantity||null==this._nxt.quantity||null==this._nxt.quantity?0:this._nxt.quantity)}),this.formGroup.controls.total.setValue(this.formGroup.getRawValue().total.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.doctotal.setValue(this.formGroup.getRawValue().doctotal.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.formGroup.controls.refund.setValue(this.formGroup.getRawValue().refund.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))},1e3)}setValueNXT(e){this._nxt=e?.data}CommaFormatted(e){e.which>=37&&e.which<=40||this.product_price&&(this.product_price=String(this.product_price),this.product_price=this.product_price.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))}numberCheck(e){return!("e"===e.key||"+"===e.key||"-"===e.key)}updateStatusThanhToan(e){var o,n,a;const l=+this.route.snapshot.params.id;var i={};i.tablename=this.formGroup.getRawValue().tablename,i.remarks=this.formGroup.getRawValue().remarks,i.cardcode=this.myControlCardCode.value,i.cardname=null==this.myControlCardCode.value||""===this.myControlCardCode.value?"":null===(o=this.const_bp)||void 0===o?void 0:o.data.find(d=>d.cardcode==this.myControlCardCode.value?d.cardname:"").cardname,i.tablenumber=this.formGroup.getRawValue().tablenumber,i.total=Number(this.formGroup.getRawValue().total.replace(/,/g,"")),i.discount=Number(this.formGroup.getRawValue().discount),i.doctotal=Number(this.formGroup.getRawValue().doctotal.replace(/,/g,"")),i.refund=Number(this.formGroup.getRawValue().refund.replace(/,/g,"")),i.viewpayment="off","TT"==this.statusPrint&&(i.customerpay=0==i.discount?i.doctotal.toString():Number(this.formGroup.getRawValue().customerpay.replace(/,/g,"")).toString()),this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API+"/"+this.currentUser.tenant_id+`/${l}`,i).subscribe(d=>{this._data.showUpdateSuccess(i.tablenumber)}),null===(a=null===(n=this.order)||void 0===n?void 0:n.data)||void 0===a||a.orderDetails.forEach(d=>{var g;g={idorder:l,itemcode:d.itemcode,itemname:d.itemname,quantity:Number(d.quantity),price:Number(d.price),tax:0,whscode:d.whscode,status:"off"},d.id=d.ID||d.id,"save"!=d.status?this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API_UpdateCreateOrderDetail+"/"+this.currentUser.tenant_id+`/${l}`,g).subscribe(f=>{this._data.showUpdateSuccess(g.itemcode)}):this._data.put(p.r.BASE_SERVER+this.currentUser.ip+this.API_Order_Detail+"/"+this.currentUser.tenant_id+`/${d.id}`,g).subscribe(f=>{this._data.showUpdateSuccess(i.tablenumber)})})}downloadInvoice(e){this.updateStatusThanhToan(e),this.showPayment=!0}openQuenstion(e){return(0,v.mG)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:I.P,componentProps:{}});o.present();const{role:a}=yield o.onWillDismiss();"TT"===a?(this.statusPrint="TT",this.updateStatusThanhToan(e),setTimeout(()=>{this.loaddata()},1e3)):"DRAF"===a&&(this.statusPrint="TT",this.editForm(e),setTimeout(()=>{this.loaddata()},1e3))})}showBillModal(){var e;return(0,v.mG)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:F,componentProps:{data:null===(e=this.order)||void 0===e?void 0:e.data},backdropDismiss:!1});o.present(),yield o.onWillDismiss()})}showBillWebModal(){var e;return(0,v.mG)(this,void 0,void 0,function*(){const o=yield this.modalCtrl.create({component:J,componentProps:{data:null===(e=this.order)||void 0===e?void 0:e.data},backdropDismiss:!1});o.present(),yield o.onWillDismiss()})}autocompateCardCode(){this.filteredOptionsCardCode=this.myControlCardCode.valueChanges.pipe((0,j.O)(""),(0,L.U)(e=>e?this._filterCardCode(e):this.const_bp.data.slice()))}_filterCardCode(e){const o=e.toLowerCase();return this.const_bp.data.filter(n=>n.cardname.toLowerCase().includes(o))}onSelectionChange(e){const o=this.const_bp.data.find(n=>n.cardcode===e.option.value);this.formGroup.controls.cardname.setValue(o?.cardname),this.formGroup.controls.cardname.disable()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(w.gz),t.Y36(x.D),t.Y36(h.qu),t.Y36(s.SH),t.Y36(H.r),t.Y36(s.IN),t.Y36(E.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-details"]],viewQuery:function(e,o){if(1&e&&t.Gf(tt,5),2&e){let n;t.iGM(n=t.CRH())&&(o.valuesinput=n.first)}},decls:70,vars:14,consts:[["slot","start"],["defaultHref","/centers/tabs/tab3"],["slot","end"],["color","danger",3,"click",4,"ngIf"],[1,"ion-padding"],["label","Danh s\xe1ch"],[1,"order-add"],[3,"formGroup"],[1,"order-add-v1"],[1,"order-add-v1-2"],["appearance","fill",1,"w-100"],["matInput","","formControlName","remarks"],[1,"order-add-header-line"],[1,"v1"],["mat-icon-button","","color","primary",3,"click"],[1,"v2"],[1,"order-add-line"],["class","example-card",4,"ngFor","ngForOf"],["label","Thanh to\xe1n"],["appearance","fill","id","vendor-option",1,"w-100"],["type","text","placeholder","M\xe3","aria-label","Number","matInput","","formControlName","cardcode",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"w-100"],["matInput","","formControlName","cardname"],["matInput","","formControlName","total"],["matInput","","formControlName","discount",3,"change"],["matInput","","formControlName","discountTP"],["matInput","","formControlName","doctotal",3,"readonly"],["matInput","","formControlName","customerpay","name","product_price",3,"ngModel","ngModelChange","change"],["matInput","","formControlName","refund"],["bgcolor","#000000",4,"ngIf"],["color","danger",3,"click"],["name","save-outline"],["name","create-outline"],[1,"example-card"],["mat-card-image","",1,"v1",3,"src"],[1,"v2-2"],[1,"v2-2-1",2,"margin","auto"],["color","medium","placeholder","S\u1ed1 l\u01b0\u1ee3ng",1,"w-100","v2-2-2",3,"value","change"],["quantity",""],[1,"v2-2-1"],[1,"v2-2-2"],["interface","action-sheet","placeholder","Kho",1,"v2-2-3",3,"value","ionChange"],["mode","determinate","value","100"],[3,"value"],["valuesinput",""],["bgcolor","#000000"],["id","loader-wrapper"],["id","loader"]],template:function(e,o){if(1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",2),t.YNc(7,et,2,0,"ion-button",3),t.YNc(8,ot,2,0,"ion-button",3),t.qZA()()(),t.TgZ(9,"ion-content",4)(10,"mat-tab-group")(11,"mat-tab",5)(12,"div",6)(13,"form",7)(14,"div",8),t._UZ(15,"div",9),t.qZA(),t.TgZ(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"Ghi ch\xfa"),t.qZA(),t._UZ(19,"textarea",11),t.qZA()()(),t.TgZ(20,"div",12)(21,"p",13)(22,"button",14),t.NdJ("click",function(){return o.openModal()}),t.TgZ(23,"mat-icon"),t._uU(24,"add"),t.qZA()()(),t.TgZ(25,"p",15)(26,"button",14),t.NdJ("click",function(){return o.loaddata()}),t.TgZ(27,"mat-icon"),t._uU(28,"refresh"),t.qZA()()()(),t.TgZ(29,"div",16),t.YNc(30,it,30,17,"mat-card",17),t.qZA()(),t.TgZ(31,"mat-tab",18)(32,"form",7)(33,"mat-form-field",19)(34,"mat-label"),t._uU(35,"M\xe3 Kh\xe1ch H\xe0ng"),t.qZA(),t._UZ(36,"input",20),t.TgZ(37,"mat-autocomplete",21,22),t.NdJ("optionSelected",function(a){return o.onSelectionChange(a)}),t.YNc(39,at,7,3,"mat-option",23),t.ALo(40,"async"),t.qZA()(),t.TgZ(41,"mat-form-field",24)(42,"mat-label"),t._uU(43,"T\xean"),t.qZA(),t._UZ(44,"input",25),t.qZA(),t.TgZ(45,"mat-form-field",10)(46,"mat-label"),t._uU(47,"Th\xe0nh ti\u1ec1n"),t.qZA(),t._UZ(48,"input",26),t.qZA(),t.TgZ(49,"mat-form-field",10)(50,"mat-label"),t._uU(51,"Gi\u1ea3m gi\xe1 %"),t.qZA(),t.TgZ(52,"input",27),t.NdJ("change",function(a){return o.changeDiscount(a)}),t.qZA()(),t.TgZ(53,"mat-form-field",10)(54,"mat-label"),t._uU(55,"Gi\u1ea3m gi\xe1"),t.qZA(),t._UZ(56,"input",28),t.qZA(),t.TgZ(57,"mat-form-field",10)(58,"mat-label"),t._uU(59,"Ti\u1ec1n kh\xe1ch ph\u1ea3i tr\u1ea3"),t.qZA(),t._UZ(60,"input",29),t.qZA(),t.TgZ(61,"mat-form-field",10)(62,"mat-label"),t._uU(63,"Ti\u1ec1n kh\xe1ch tr\u1ea3"),t.qZA(),t.TgZ(64,"input",30),t.NdJ("ngModelChange",function(a){return o.product_price=a})("change",function(a){return o.CommaFormatted(a)})("change",function(a){return o.changeRefun(a)}),t.qZA()(),t.TgZ(65,"mat-form-field",10)(66,"mat-label"),t._uU(67,"Ti\u1ec1n tr\u1ea3 l\u1ea1i"),t.qZA(),t._UZ(68,"input",31),t.qZA()()()()(),t.YNc(69,rt,3,0,"div",32)),2&e){const n=t.MAs(38);t.xp6(5),t.Oqu(null==o.order||null==o.order.data?null:o.order.data.tablenumber),t.xp6(2),t.Q6J("ngIf",!o.showPayment),t.xp6(1),t.Q6J("ngIf",o.showPayment),t.xp6(5),t.Q6J("formGroup",o.formGroup),t.xp6(17),t.Q6J("ngForOf",null==o.order||null==o.order.data?null:o.order.data.orderDetails),t.xp6(2),t.Q6J("formGroup",o.formGroup),t.xp6(4),t.Q6J("formControl",o.myControlCardCode)("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",t.lcZ(40,12,o.filteredOptionsCardCode)),t.xp6(21),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("ngModel",o.product_price),t.xp6(5),t.Q6J("ngIf",!o.Loading)}},dependencies:[m.sg,m.O5,h._Y,h.Fj,h.JJ,h.JL,s.oU,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.Q$,s.t9,s.n0,s.wd,s.sr,s.QI,s.j9,s.cs,D.XC,$.ey,D.ZL,Q.RK,A.a8,A.hq,A.rt,A.G2,z.Hw,K.Nt,G.KE,G.hX,X.pW,q.uX,q.SP,h.oH,h.sg,h.u,m.Ov,m.H9],styles:[".mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{background:white!important}  .mdc-text-field--filled:not(.mdc-text-field--disabled){background:white!important}.w-100[_ngcontent-%COMP%]{width:100%}.order-add-v1[_ngcontent-%COMP%]{display:flex;flex-direction:row}.order-add-v1[_ngcontent-%COMP%]   .order-add-v1-1[_ngcontent-%COMP%]{flex:2;width:100%}.order-add-v1[_ngcontent-%COMP%]   .order-add-v1-2[_ngcontent-%COMP%]{flex:1;width:100%;text-align-last:right;align-self:center}.order-add-v1[_ngcontent-%COMP%]   .order-add-v1-2[_ngcontent-%COMP%]   .order-add-v1-2-1[_ngcontent-%COMP%]{color:#00f}.order-add-v1[_ngcontent-%COMP%]   .order-add-v1-2[_ngcontent-%COMP%]   .order-add-v1-2-2[_ngcontent-%COMP%]{color:red}.order-add-header-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;background:darkgrey}.order-add-header-line[_ngcontent-%COMP%]   .v1[_ngcontent-%COMP%], .order-add-header-line[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]{flex:1;margin:0!important;text-align:center}.order-add-line[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]{width:48%;margin:5px!important;flex-wrap:wrap;flex:48%;font-size:1rem;justify-content:flex-end}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v1[_ngcontent-%COMP%]{width:100%;height:100px;object-fit:contain;margin-top:20px}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]{display:block;color:#000;font-weight:700}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;margin:0!important}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]   .v2-1[_ngcontent-%COMP%]{text-align:right}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]   .v2-2[_ngcontent-%COMP%]{display:flex;padding:5px 0}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]   .v2-2[_ngcontent-%COMP%]   .v2-2-1[_ngcontent-%COMP%]{flex:1;width:100%;text-align:left}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]   .v2-2[_ngcontent-%COMP%]   .v2-2-2[_ngcontent-%COMP%]{flex:2;width:100%;text-align:right}.order-add-line[_ngcontent-%COMP%]   .example-card[_ngcontent-%COMP%]   .v2[_ngcontent-%COMP%]   .v2-2[_ngcontent-%COMP%]   .v2-2-3[_ngcontent-%COMP%]{flex:2;width:100%;text-align:right;padding:0!important}.order-add-line[_ngcontent-%COMP%]   .example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}"]}),r})()}];let dt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[w.Bz.forChild(lt),w.Bz]}),r})();var st=u(5064);let ut=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[y.o,M.j,T.I],imports:[m.ez,h.u5,s.Pc,st.q,dt,h.UX]}),r})()}}]);