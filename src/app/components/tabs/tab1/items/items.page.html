<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Sản phẩm</ion-title>
    <ion-buttons slot="primary">
      <ion-button color="danger" (click)="openAddItem()">
        <!-- <ion-icon slot="icon-only" name="save-outline"></ion-icon> -->
        <ion-icon slot="icon-only" name="add-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-button style="--background: transparent; --box-shadow:none" slot="end" (click)="loadData()">
      <ion-icon color="primary" name="refresh"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>
<ion-content>

  <ion-searchbar placeholder="Tìm kiếm..." [(ngModel)]="filterTerm" animated="true"></ion-searchbar>

  <cdk-virtual-scroll-viewport itemSize="0" class="example-viewport">
    <ion-list lines="none">
      <ion-item class="list_item" button *ngFor="let item of Item?.data | filter:filterTerm" detail="true"
        (click)="openItem(item.ID)">
        <span class="example-spacer"></span>
        <!-- <ion-avatar style="width:70px; height:70px" slot="start">
          <ion-img style="object-fit: contain;" [src]="item.imagesURL"></ion-img>
        </ion-avatar> -->
        <ion-avatar class="avata" slot="start">
          <!-- {{item.image}} -->
          <!-- <img src={{BASE_SERVERS}}{{item.image}} /> -->

          <img alt="" [src]="item.image ? BASE_SERVERS+item.image : imgDefault" />
        </ion-avatar>
        <ion-label class="ion-text-wrap" style="margin-top:51px;">
          <p style="display: inline; color: black; width: 100%; float: left;font-size: 1.29em;"><b style="color: cornflowerblue;"></b>
            {{item.itemname}}
          </p>
          <!-- <p style="display: inline; margin-top:20px; font-weight: bold; color: cornflowerblue;">{{ item.itemcode }}</p> -->
          <p style="display: inline; color: black; float: right; margin-top: 3px;font-size: 0.85em;"><b
              style="color: cornflowerblue">{{item.price| currency: 'VND ': 'symbol':'1.0'}}</b></p><br>

        </ion-label>
      </ion-item>
    </ion-list>
  </cdk-virtual-scroll-viewport>

</ion-content>

<!-- 
<ion-modal trigger="open-modal-item" (willDismiss)="onWillDismiss($event)">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Hủy</ion-button>
        </ion-buttons>
        <ion-title style="text-align:center">Thêm mới</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="confirm(formGroup.value)" [strong]="true">Thêm</ion-button>
        </ion-buttons>

      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <form [formGroup]="formGroup" class="form" id="vendor-form">
        <ion-item>
          <ion-label position="stacked">Mã sản phẩm</ion-label>
          <ion-input formControlName="itemcode"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Tên sản phẩm</ion-label>
          <ion-input formControlName="itemname"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Mã vạch</ion-label>
          <ion-input formControlName="barcode"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Phân loại</ion-label>
          <ion-select style="width: 80%;" #tablenumber formControlName="category">
            <ion-select-option *ngFor="let item of Category?.data"
              [value]="item.categoryname">{{item.categoryname}}</ion-select-option>
          </ion-select>
          <ion-button (click)="loadData_Category()"
            style=" position: absolute; right:55px; top: 15px;  --background: transparent; --box-shadow:none">
            <ion-icon slot="icon-only" name="refresh" style=" color:rgb(0, 47, 255)"></ion-icon>
          </ion-button>
          <ion-button (click)="openModal()"
            style=" position: absolute; right:15px; top: 15px;  --background: transparent; --box-shadow:none">
            <ion-icon (click)="openModal()" slot="icon-only" name="add" style=" color:cornflowerblue"></ion-icon>
          </ion-button>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Đơn giá</ion-label>
          <ion-input formControlName="price" name="product_price" [(ngModel)]="product_price" autocomplete="off"
            (keydown)="numberCheck($event)" (keyup)="CommaFormatted($event)"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Ghi chú</ion-label>
          <ion-input formControlName="remarks"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Trạng thái</ion-label>
          <ion-select formControlName="status">
            <ion-select-option value="true">Hoạt động</ion-select-option>
            <ion-select-option value="false">Không hoạt động</ion-select-option>
          </ion-select>
        </ion-item>



        <div class="content" role="main">
          <div class="form-group input_container">
            <input placeholder="." type="file" id="file" (change)="selectFile($event)" #img1>
          </div>
          <div class="btn_upload">
            <button mat-raised-button (click)="handleFileInput()">Upload Image </button>
          </div>
          <div>
            <img alt="" [src]="preview_upload1" class="preview">
          </div>
        </div>
      </form>

    </ion-content>
  </ng-template>
</ion-modal> -->

<div bgcolor="#000000" *ngIf="!Loading">
	<div id="loader-wrapper">
		<div id="loader"></div>
	</div>
</div>